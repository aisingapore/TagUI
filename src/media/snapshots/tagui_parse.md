**@prettier/plugin-php v0.11.2**
[Playground link](https://loilo.github.io/prettier-php-playground/#N4IgDgTgpgLjCWUIHkwIPYDsDOIBcok8mMA6vACYwAW+AHAAwA0IMAhgEblW14AsLAK7YoAFU648AMzYAbES2zEA5rKgBFQehhR8M+VBYwIbeLJUBhdAFtrbAAoAJe-hCYsulhxMBjKAGUYAE81VzBsCABaACYQFmgAR0F4aHsTZTs9OQUQYhEIGDS2DLYsgwBfFigKeBh0FDR4LElQNmwYMpFK3MwwQQ68EAAeAH4wajAAHUxpgHoAKgACewBBACV-AFE1xf8LNYBJe1FFgDFkHdEVgHEAVQOztZWAWU3SC4BpRYA-RdFNgBCmwAMgA6C7XRbzWbTOazRY+ahQHwAa0WUlk6AA7uizFBMGxrFB0fVFqD2MpkotSaCAFbYakQMkwAAeMEZi3ciygbPxSiw0wAJNgfBB4GhFgBeRaCtgQZQANwA2gBGAC6AG5FvApIsABTC0XimCSyWTEDmgCUixqUD15u2awui0ii2wYGROqC6MxOKkeIJRMWbVxEHaizAcsJsCQk1hIEtGumOv17QgYHQ2D1kZoxCk6ANIrFaCYyxWokcBwAcucAPoAlZbKsvTaW0sAclB7etAEJTejslBrbN4YjkWiU-61ItqCGeTocE0ZpgU3rs2xc5h84WjSWyxXq3XNgANf5V-wHZBVy1982U+BW4OYCj6nPUPMFw3FmCl1YHmvILWJ5nheV43marBso+bDPq+G7vlun5Fsav7lpWAFAaemznpe163iA9LQbB66btuX4ofu6FHlhOFgfhFLJFalrTLa9ogI6zqusIxLksUVJ0gy5JshyXLznyS4kkyGLYriaiBlAcYzAmSbLiOix2CixLYII0CLIkyTQC+U5QAycrEmwCqmLInDTjBL4+DBiwcMS6Aepg1TJrqeo9sZtY8vA7RZuRaCWtarEOmsTo7K6DmYO47L+rB5pkjKyESqCizmopVoqYKxB9DAtbGVKJJuTu35MO2EDdhy4XsZFnEIjB8XUm5mUgClwXshlWXxomQroP0BVFXiJX5mVXUpZ29LtpVWI1aSdUcdFTVxdorX4u1nVpd1izTdg7Ypb1Sn9Zggo+Fg-rKCN07SuN+J6u2DHwLWF1bvAyhCTAs1VQtTJLQ1K2xS1rmbc9r2XR9X3JT1Fp9blSJsBQSA3cSd2g5gj3g4jyMQAJP3Vdai2IGxy0uqtINtdjUBI0gAkw+12XKUK+baCjxXo2VT18S9rM6HjM2VYTtUkxFUXk8D60Y4s4N83ThEdbDTOnUK0AZhDggkCVDBaquvn+YFerKDGmAKo9PjCHU1ivdgCqo92oWLMAixqZiSM2hunscNOpJqMobA+N6FCe+w3vEvCauZrU9RBKrUDqxzpUPcbC5m+2FvtDYNt28Z3ZC39Nqi-V4sxc1UttQzKf4mnGdW9n9vWkr8PTFi77Tt5UhQOgUgGpHqOO8Agp98H7BKkP8foBrJBqmNKc+LbvcT-3KmrhdmswIv6sj2wY992v0-Wv2DBhUXZOulA1hoN6EAyfmmsvsQW0ZVXpvm5bWfzzneI1U3J25Xvg0SAAGogEanKOiHwmIRCb0nsZRMMoAHr0iJKFUWoRyRBVJJGcNNcalnzEyTYyBTicigNUGW6AERIlRD6fy3tvTCBUE5KAvpFjmHcp5fU+8N7jy3p7XeS8uFqkPtKFU1oeGTy4cg1B4D0GYPwYsQhxC9TkGfNiBkxkGQUCwE9bksEsS1GoCQrEbDiSIijD4fmzFlyCkxA5WQtY+62I3BJaUaYHHx2sn4NicYfFxHNDCOINQIDyXKsaR2GV2yzHBk42QoJP7thXl5fWLIAowCCjE9x6snEYEwAPF28I3YvhiXpCeSg6gQG9MVFMtRuQpMClg9AHBaTIjSU+F8mkghYnqBQbAQoMl90TvdTGNj0B2MyZPbJS585E3+qfQGEsy7smlgzbm95awxLibbQ6v8cocJgVPdkfZFjHwQQIwBMAQFaikHPBeIyxkDLxPAtSQDMEpjlCYb0s5NGe1LDUEUcoXw4yQCUi6EAKAtzbsSDuXce53LkOM-u1pB7Dz4eIg5M87o3LNnC+xDy1CnVXuc-Z29+Hq0EcI45J87Ri0ahfK+elb6AIfpgJ+e1omjLkJshU2zGbNxXF5LhxLUWIIPosI5oj8kRndjQYkdLggInQLIQQ1gcCLFbptYpkcykx21AybiL59E0A9uwUOahpjIqXiStFgiSrvLYEEWskYKBCtHta85apSyCrRSShgQjSzeuFWc9eapVRCLAXHMl5zLngKkJAzMdocUIrgVqN1SCUG6wFUSgNrqRUwCEVKERYjc1SPDcuPWeI-J1LSVjHmtZVCNM5fEvJrt0Du3rRwOQJSMzaoqbJYk1T2QG1afIxpzSLGmVgh0rpYLelnXbfCvFaMk6Y1WckOtmIO2xPidMkW1Li6NUlksiuis2W1vnVurZR04Z-z2amrWRyTl3ouaA9EWKDTnqTY8tB8IXnal1Haz5IZt6-ICg5MF2DaZMmgKC8FmBW6jWhd3d9G6F1LzgUi7NO8n0YtfbAT+yGG24rQ1+vZXqUU5qDaKo+VLSbzPPpfeVN8-RMu1CylZ4Nz1cp5cdXZ-LOFZvI1h3N+bxXDnhE6mWSJuQMe9BdJVKqGTqpZeertUdynegCosfVaqDHGq9mazAFreEUcjcG21EAPmOqRi6oTlG82eoE5avhvq2ynOM7Z0z09Q2JnKBGiRUbQExrjdAwUH7F3wKfSWv9-H142dJf54NFKJWRfTb56x4MsRQA4LWbwajgXSnNLmXpIBv1ulgJJ4kmWOBOSY-kchTCtMiBfB2kQ1IWUZayzl2rwLq4pCwESLWlkxQ2QUnxtcL804dey7lrE+RuymnbDjNQ2ADozP1BNmtayqtdby4TBbiIb5EgdjKKbO3Zv5b2gdmwUAEmwjOnkSgUAIbIxy7YtE0odaSuMAHCcup2jxw5BdZGurWNKGB9xKIyNEpkKB8Sb2oyURCgey9+Dah1noFctrUr33qEpn+2AEHj9UfEkxJjuywYFToEoMGbAQRMA+DVaYGALN6jo9crWHHmkmQFYtCVr7vg0TyNJwTuo2pL5qAG+yA4BxTibClXAJA1jYevYRxzgXF2sp87UpzhVwP4eok0VAaHzKfTYiRyQKAygTA5JV6iHL6AKDeh5+abHAunIO+9N3VjOgrfOKwE5N7fTiBPcwMq5y3Pjmu5+6bnEJjORh+BfIpAN8mREhW8UUb494UmNrKH6w4eseSrj3ngvPJIGCBqJgZQCrbD4laeT72ME0QmNnYKHQ7RaxsH6DYP3LKPvY4ocjfm1hg9NXdEgekbpdzsjTIICxOlM86XsZAdACpHsvjuoOAfNoYwWOi0vkHK+1-IxNxDyIO07va7d85ZQxBIiJQCoY-XKJ1GkmID763S4GSW-JmAIIpYIAADNZSw19+RMBSx6RfkbBzcwcns-9bd3tI8ZRkcnsIAEDC88pFwXsIBNZ0D+8YDHtaxQClw8CkDMDYDax6RSDPtyDCCtFrZn8sdL94R8hEAGQvdhcGRRdRQaYdAx8PQIBJ8dp0RDsINcFGtE9fQ8EMd+Y+1Z04QERoANxiQgUmQvcHJx9BCGRhCGEq8ZYeYFV3pq9ydVCZY6VrIdBpgpAsQxQdADRBoYBhpjImB-ElhkBbhRB7APDFgLBGx7BtgAApfwXYfYI4E4c4S4G4e4R4Fsd4NYL4X4f4IEMECEKEGEWEPlaw2whNBwpwvEFwkAIbfgi7fSFIO0dONoAQ7sOJJQuw-qeGSVDGRhFvCFPERDWFN6K6RFJ2LI2oHIoafoVGJga5WAIKToj6RFMBCBKBBNcY66ZNVotQdog0VQ7o4AXouwwUXIwY5wkY6tQUVY9DKY2NGYlYnBdmEjVSeENgMANyF8FTKQTWCxL-PtRQ3gshDgehOrFMGVV4odWdctNHf4zbNdTjGaAeIUD9R4+nHJbAVGMaDGEEl6MEg6HdYmPdM+CmcuMGM9FDWJBWK9ZWFSYnZY0LPEoqJ42EtYjY-oxwnY-IvYoKKEykr-SYtLGk+wgYwqZwnjZSaY+NAjTdCkmE1k5NNLBQm4u41hDlWQdEFk5oV4ng5Q5rL44FH4qTYqf4vpGU4U545odHByHJEqNxNWTxPdHxOMPxEAAJJgIJEJLqcJPaKJWtDZGaRJfUZJVJdJHU6EvUnAA03vCEs6DJX0qkwZRExNUM1kyZLANE2ZDEujLEo9HEtZV04rQkvlEknyGFA0EM+U-09DHomwvozkuk7khklOb0sZKM-Uo49k4szY7Y8stQAook-kkLPMkU2sr9cUzANSSU-EeyGwSXNrGPeXQxIbeAEbVjYorQqfb8Kwhs2kvIls-xeEaSHEN8LBbACyJ7HQYScnbAAkMAWseAOwY2Ik5gt0Xcscrcx+DQgQoQ6ferZyCQlU68hUPc+cNpN0Y808880bNSB8ifbAWYcYGCK2SfLRTkdaEQC+erbSW4+odkOMLBfRVRWbcc7AAAjxAOSrXTeEUXadRHPs+EZyFhOwCALnLBAc58RhJfU8i3LWJTMc4qLREyGCmfdgAoHTI1C6WvEgdgpkJfIUSirnIqVnJoqvWsA-HnIojcqzI1aUdsBmE03CrxXqXxAom0u06MUJEKRudqW7DIpSFSDkrYrkoYwUMS9mSStyFQGSiAWQFWUisrP0+rWcZ8acOxNhavL3bQJEJkcQZQaIrvK2Xvec40V-KDKAYQTgMwWoWOM6HQS+WsJs+EzmB6SaCJUEEweaOaAuAGEuJMjaNjE9bKvaXKtgeaDMm9ODSFUk-Kek-FJFcylKk89K5wnkSMZ8RihcDeRkg0Jq5socUKY44LBNYa5eKwiag0dqtKyy5NSVY2dya3Ykdq6kLk14r3bquyMhd-OvBkPUN5TAIIa0ZyfBYkaAKS4whkYa83FcpdIZfS3aTsPKgmQquZYqw9Uq1lCqt66q7ja9XjPZNMbtPUNMOoX0JAPUXyFOCGJi6tVdF6OYr6B2Aooo6JGCSkDPEqdsfEVQR-W7BMU0fQEQKxZ2NSEQdy+DREVjcvZGLgkwHACwiSAm0feRTyigXymPO6llAK4FayKvQQDPVveauURUTBaUWUeUZUdUFNcW2W6IEqGWxUJUaITUE7OlTvWWgAZhVoluVF1s1CFENtDTxvBkjDDCgFBHGDAASRlDNo1rxqkEO1u2Su1vBjmONOMChuxBhrhtgARv6qzGRoRqujRrGqFHmq9shmunaDlHZFcWMHBrb09trTmMqkxpdOxpFuNm7Fyhjozrjr8lgmTvTEzDmvTrWUzt5KYDTtStjqMNrAToKFOgbpPKbqumNMEA4DTCrsbuLqMPrqLprpLtbp-A7o5yHq6MHMiCnq7omInvbtHrXW9vLsyTNMemztTNzozx+lmgXpno+hXurrXrjp9rQNNLwsenNAPpHrPpRrjoi1XqfqMMvs3pvrvvNEqkPtfvDpPsLsfoAerw3uvq8XbElHvqPrHqMJfuAfXrdGME-ogY1Ggf-rmPbrNuNpKmMDPIHs7uPuUHgVKN0iemZuwAsJtrtodqpvKytujH5i4IoUKRlgodZv93ZvYTOjNvVBVsVslpTSdpwynsNuiCEdlqVBweloEYVF1oVvYeVIcWqqKhYWdxK0WLtGzKQ0wMeoHjb0UZ0AoGUaxFUZklBGlG+xZuUL6rr1hsrKGt6GatGvGtON0ecdOl8mGjehDpeqmiqvypO0MeqBMbMaxCeRYJvKscoeVM2rLKYUupKRupp1YwKgeucYRImmEJyverjMLgTO+sWV+oZn+oCaBqJN7LofctF2gtIbIUgCgEiBXz8BW0YU4ZZB6pPzJDytYrxCFCdRP1CY3JKk1xTQabX0GjhJzwCgRpqCNM3wMBTWgE7mgHpye2IGRhIAivUeJIau0dhSmsLMHgGZCbyrCfWVH0xVGMcb0dyg2br17zVx+wuzUrAC3tkDwesANBOeMbOYUpMTbHbEPp+aGd9Aufcnbvua2Zt05xed7v7swM2ZNRINhcALTDkkXhWfxD8EYqRcDNOn7I4FXxJ1Hy5uWwjG9HJ2IP92fy4NnHZBv0fihaMf1B-yZd1F9gx3CCsUFBBb+bBbj2lA+bFC+d5aRkGf5exHBaHBUgUJ13VRlSZDj00xQO90t0-wVMZcwHv2IEf11zhzewBK8khsVX9ogD1E+e+fFdOZUf+eD0dn7HNEny1cfFoJeyoMYJERUmYVa1XBNehvNctbFYoAldtYFftYpSdfUV1ewGoFdZQMoLhM9cj2mB9f7WNd9tNcy0DZFatZDZtdMbtYhcjfAG9BdYTHNTdbgIdWTdQVOSxbWdxYefmeQOfGbZRfVwgFLTTeiwhszYDYtdzeDdDcLfDeLYLXaj-1xBXFjatErYTfgOTZoOWaQGxfWbbehZcUZhKxkQjhMnKxXdWb8FYzxZyVTYMF7f9bNcHfweHYLfOYBZLaZHLbEQTbQNra1HPd9YzYKCzZhqDb5bDalcfYnfNCkhjbjYTFbYoPfbeyYPcgvb9f7evYA+td+aA9MZA8dZAHoKYVvxOmg7oKzg-cygQ+-dTGQ+zZvdFcA9HeA4jdA5w5sGncf3jawKe3oOoO9cQ5-b9qo9Q-zfQ7o8w4Y+w5wJZRfcI+wNwJI6-fTYo9-YHYE5HYfdE553E5Y9nag6rYcRk7g-wLI-k77cU5Q6Hdo9U-Hew+pYk8t2IDncMx0+s9ILrfHgbZxeZe2dbdPY7eea7fATk8vco--bM7Q9Bfo8s7koCgkgfy04psc6i6wC4-rdXcbY85bdGd3ZKREHZEPbXZPfbYFCuODG7yafFcYRamgDUEsi1iZYt191hP1YDwRyNf1EcYoI9bg6ASk+rfQK6509g4R0WC64IJe048YL67fb08G4m-Y6IIS8wAQOtAAD5KVK3zPhmLGvOCuFvUXOp1ux2oAtQfHiBBBDvKm92lzFggi5SuyWUoddWGuiL6gJwWURRQZeKEIfDKikBrvaW9kIb4XjA82VOi3DBmAABOS0U0c0GssqtbAHvuoHu9oTizsHpgFUaIKHiCSfWH9qUKUGlOyu5HsLkT9yAoticCSUMmocJ2QUKg2H3PaMFu7ixwzMS+1O-b8LwwGH-MvHoBcH3Ken-MxnokUuigbtdnonzn0n7nkANieuoX27kXp7Ce7tdu6X6V3B3N7SRH814nyVmXhXuEhn+SZnxO7tI33Um3U3wciXyIIURXv05Xs3goNXwyw6O6XnnlS1nXhFjXkxS3k3pn23zMUKUEXk7ti9oqxqEfVpvQ7wZ51pPUa0eRc0UEfXjD6Vgl8Td2Z2cncBWlrBN6OZr-UsUXTSAHAIiyNgfwZ82nLZlkBVCzFpf733pH-34PJgZgXWrH80FMR8UkBHv30Lg36VrvpgOgXvkAHt-vit9wJkIf9vkfzPgP5gPgKf1PqDwftvvXjvsn5gAANin+Jzx8ZGmEX93+X+E7H8P6n4zD6AJwH4X53+B-vdB-H6P+h5AFdujFP-qHP+U5v8DuU-NNkxBlAWxm+JAaVqeThLF9agW7YwKdy1A9tzoOkVZoVGmawCsAJff3AsxEDuk1wvLaABM2EDQCZmcA+ZpYxwI09ycBoCAegLIFYC6KlAthqd3x50UCmjUeRO5H+xDlmBpfaUq5GwoRhXIggMAHghMBEhSw2XJ2D+XATdVzAPgWoLIFjjxhw+SkTEuK1kEXV6g61d8AyDjzk4tB4CAODBhUAqDyYafDPtfwBYEDvmxApoKQMwGzN4BuAqgWwJ-IX9X+KPd-swFET4RgATEfplfzCZkgecgQtQYAJ8HADw+16XzPGGQEXtrBoQzbskNB65RxmjgqZsHhgEuCW2qAyARgJyHkDsBrgzAKVgaZW1iQ3A78iYmmBBY3GhzL9H2kdSDEfGh1Pxjk0Br+ppe2fRYCtSQDKEzCl8OJgVFeKGpDEPzWQfn31AnUzqCTXQUk3sp6EQw91e7E4xGqZMsq2TSqrk1+hrZo+QMIpssnKo7CAaNVHZMzFcrQBIgD3KcuYAABe61TttFTw534YuT+Q1tSF1AHV6uX+Ebj1yXYpo32SXfrlN2oQGd4uYBUEQmw66Dd+83XWsGN304psiudgR+MLnqxW1fWiNPmr02nDyI3on5MMBJHfwUJaQ1fYQrDk0aNUNh1JJcqWUepMBsR67fqvY2ubuMRqoUHzO2Ump0iFiRXJUnwTlhqFdQwFOcjoSUB6ERRwwt5kMPJzQVu0MAJpjfBaZSjq8NI-ZgaBFH0jsijI5xsMQcaCgdRdZXkdqJkIXF8UVyWahZTLLTV6c1AawA7n1ClNBYDAA-gwGPilZaKL4A-Mk0YLkUZIeQHQO7C9w0AmMjCZPP-zGw9hBQDFI-OviRSSpkQ1AChDShWj+gww7IOPF7hKY7DkoLUW4GsGBCA5hyh1JmLlGuDAhkADYYEP4CVBVQaY9iHPCXiQDtgcMLnAYWtWMb08K07QwSmNArTw1+x+xM4fjHbpdilGvYtHCOIZBgN1KCaGymgXwRpVlh10JfP6iXESU0CN1RyrKR6ih4nKtjEgI9E4AOE8AjeTACiDzgyhJxRjRNqjGDqHV4EXjNoVgF8aujUSoWfEIMPvHTinss4nzLegTbK5GCD6a0CmLTH7oVorY0UUgwBzOx2KDIFqOwFkAWCJhH3RYPENMpXklRKo0ZCZHVH1ZIENMFlGIODAFAdQAcYdKIWias09C1AZVI5CFo41jY9WKvpZFr4LkzoO0J8VrDuhDig6s4zoZVXBK5ReJI4j+uAz3TlB6iMwaYOKPJBIhMYsPZPk7FAHxhWycnbKJpK6h8SYA7dCSe+LrxSSFxbEWSUmBMqKSZUKk-MmpOAAz9dQP9Y6I5Paj10jJiNQydPn0mmS5RGlEABZOTGwQvc13akVZO+54wbJsNOyUmKpos9vhV3YImFKUguElIP9PSSOIibBgiWn5BVGhJuKtYRADDPgkIR0AE4LAEU37l8LJFtZTE74k7pMya6oghQHk-qiVAabXRpJj0WYAAD1xRcYJSfiDjDRTbuw0uMEimAB6hQQ8wa0HGHSJkVLcHORvif0xFLjZg1gWaNMHbCCgVQh9VqXXiylnjcp0ASkNZCZDdVoArTf3NJNYTB4GQs4NfPH0Wmsg1UkKQQQTiXGt59p-EiMCdJQblFep-UyYINPkkjS-SY0yYEiimkzTMokweabomMb+hXpo0VaXKC5zQzLQ8QxMOtM2mYBtpKoQUNED2neTMp3onKVdUtyCAzptSBpldJZQ3SW8M4CyJGN6pIyVpXLdSGjKQBfSSZxkn6R1P+ndS+pEUgaTZOGmw8IZUM6acxHP7SzYZ8MwciNGRnThUZVFGGtLKxkagcZqU80DtMUiEzBQutdKd9IMlkziWJSU6XKBpmXSwCXaM0rdJ4FMzHp1eRWWzLemqyucs6V8YVGEmfjiZ34fSS5SpoeglBnaMlowhTBXYgwpIJbIRMoSHZ+0eqJrCkxmx1Z5EYVHvGe2uELiRyYY-QaCCJA0BnRcgJQo7iZm3E+QM5fHGq0Epl99BIOJ0e0AsGi4yWxICHKDiQAstxRk+WHKR1XBt5a022VOflmUpRybsGGE2YOLRzDi+Zo458jlTEmSpS5-Qn8d2MipoAWpvMxGr5K3rmgiiY808hvhTZWl951ABOYfJKioJjZW8-qllKqzYAEc5WNPDuTYmUBN5AcySfOL8l7pFJWpK0mPNBB-z3JN8g6aVjMRV4ScHKcpJQnHDESz512d+caB8lfzd5rAfOUAvNAAKgFGU2eVlPAVsSisgCqtAyB8opNMsaExBWgGQVIMr6ZkzBRFLiSKDEc-8+BUSEYXwBmpcQHBZ5LAWeU2JkCDhWiELmpiXw3BVhZnknkoKv6aCgKOws4UFEAFAi+Rdwtvm8Lsaeg2RUorRCkKQw5C2QJQp9mzyd50ixSU6O4jOSQAACsxSIGvkfzcFaiiBepEmYuQmkLSOBQnIMXULXmqCwhdYoUgsKE5Bc5xbYqQWkzJU+CjRdgCCXcQmoaEshcwn0U8SQFP07xSYoYUiBnwHwKAEEGKwKLxFoIDJRQCyU5KQlVCsJUBT4VaRByxShkMIudFiKPFSSuxdvKkX+TCFhSmpRYoAUdLsluSlRaAvCWVLJMsinpTktiWyldFCShQvIhEBqALEqAHJACCCAAA1OQKdxgXUJ5E7YR6DOW6TApRcWACwcSwgCXcfKE6F8ChKky1xmO93dyEZHzKeLP5NCwWfQs0IFLmELSBZUuCWWrKlUe6PJYEtmWfLGgWAH5Wsv+X9KSAWUoFRYkeVGLWle6dpR8vmUgrMAYKv5fL0wX5KYVMAL5aCpWXgr5ekK02ZKhxXTLSQXCTYBLkOobLBcpIbZYdEfh7KmQByzAEcuJGnK5A8gH8pctMTvxrAN3dyopMpXUrBKyfOFS0ueVdTXlAhOJOcipUXwOhXS-JSKsVVirSlhinheEvOTchRVaSCVW1IRVsRCFqqyXFmGVWBLTVSqrhSbLwU6qPlZq8ledL1XLKouYcWlVggZW7KwU+yihIcs9wcrsi4y85ZxQqwIh+Vgqo0r-JdVuqliPLSRVKroWWKGFDquvK6qUBhxMVli-JampIDpr4AmajVYHN4WwLc17IYgmHANUmSjVhWdBTGozVLELV12QBfWoLWNqbVySklRUtLV6rFgFagzMSuMX+TFJncGAIiFEDzgm1bC0deOsnUdrmlqiwZeovRB4ZqAE64SHUtEUUIx5ValJcg2lUyKolM6tdXOoBXNrj1665nPOtCX2Kl1jiwhReu-I6LFMUyppTeslWpLh1DChyGgAXxTqbaP6mAH+uvVlLb1FS5dYBoXzqRYAIi9xQgrfWgaP1+6pNSapuJAboA-6uJGhuA3AKF1Ay8DfevzmQbdIz6tVK+sHU1rk1by4jQEGRXlJMNNG-wHRv-4gbNVi6oCtht0g4roxFGxNd-ONVEbONtGuZfRoCXNrGNzGiAEWvKWjghNZWETTxoTWfqf5+SyMMbFBBiDCkpwPpmJrYWabW04KVjcWrvVsT9N7sTdXBqJC7qk6fG1BYpLU020zNFAbTWal02Oa3mBm6TWBtHBDKnN0GouVuvjnwbeNymgTbIoc0aaPNSMFzf4rPV6aothm3De+vY0+bl1hCvzaRr0XWah1P8hhVoixBsrPNbm0EPlsK1IwvNWqgjWxNK2sMLNDS4LUpuQ38ba1simrUVri0202t5WozTJsoRpb85XW+yFyviUUKENbG6tbZrSVvKoAlkJVMoUw0za1l82nrd5r62OLFtc2vgnVu3XiLstlGwhRtpFqWFith25bUlsQ0pa1tBC9BbNqO2mJhtky0bSFqa12aGFEw04JINi1YrAl72z7RVsu0RKPuH23-ttqC1WaxtXil7dIsIW-bowmG2HVZpW2VbUthG2RQjvu1xLHtiS57bQua1UbZVWIJnKcHqD2BRBUwYrYTtqDE6IApOh-v9vw0o62JlOmANTtp3kTN1e2ybW0vznM7WdZO+HUTpJ386kdAOoZTDsF006yd4yznaFplV0wJhbO8nR1tBAK7hd528bVCocVM6DEiu-zbBvq3g6cdLyw9Srp11q7vtza1XXTpF0M6rtkS03TQF12ZbyNjW3Ha9reUpxHAogZ4MCEw2e7vdvum3ZrpM3Eh-dPuvXfUp22NKjdB6whWHsD3K7499O4PVVvt3x7xlI27Ha7uN2KSU4ogZQV9uzWBK89Be5PV2sZ2h7YA+emANOFB07qIdTy2XSbpL017C9AClva5vV3GbU9wyqJR3ox0TKX1T27PQetz2wALAaAuvLcCcp+7x9k+kgNPv0VB7y9K89kPQJMkiUG98KrnYivzkpwJ9hQxfbPpgAH70BR+5fVlJTjhrChWmGfVvqQ1u6ptsq5GBwEEDKAvdPuzDS-rf0f6E9xKvBUMu-3v6A9EewLfXpj0oaBtWWH-QHq-3QHgDn+i-Vrvt1AHf9GerHTLqh1fq3llXdrRbrYW4HutXe3rYDsIMvg69u2+-Yap31haolZBzDfQaQMh7e9uVZhAZvQND6s9nanLWxEUkdp5F+Bm2vweYXEHVtgO4Q6Acs0SLuD+2-OcIcw3yGmDPewhRIed3D6ZDNBuXXjHwSE6wUmGnQwCjL0AHl1Bh8DBQej0j7IDsi0w4lsEOggbDRh5AywZsMcGyNo272fpKChjjBY-+0rIGJxB3C5AAUUxOIrVZ-D-cGiPZD2DqBz5qASJV6PkuIDHZDhCyNaOyECPmBWsXtRI-JLqqrhojg0REPEYAUOFkjX1A9EUwyPBH9CNdfJQ4QqZXkUwfi2sCyCCDJ9SwzRlkO0acXcRawbR60EiFkACFI1LxMyG+VLDEBKcmkN0PABRBUz4AfagKCLQmXd47AWc1cMZ1TomzKonR-o92D7BU9Bwa2c-mDSJ7bH2wnR5PvsdJpHGOQmxs452p2POK+jVxyntTyDL5GYjRR5GgUtmPzHnSayJQHMfMCggkjjsFI6XDSOsZ4BQRrI7WiBPzHQTuR3jJ8cKNxGfjCJ8wACbXSYn4AoIUo+CfKNHCoTVRuE4Cb+Mgn6j8Mc7h6qSCIB2QDDQub6r0iawxydJ2ABYM+JtYLBsbbEJGI6aKCakTZPZBtjDrsnCoTo5GDVH7DkNTuNUQeAmsDoa65534fxovLUjLy7xZCC-FQYm1N6ii4p2sJKaepb4LFBp5IEHWNNa8kBjh0leVkNPGnMDj+7A7Ksgm30fEmAfwFcDWAnBXQGctYxJAnpkJXQFiigMqmsAOo3TKlJA1YQrTeNZ5Xh+eaJK-G2rS0ChIkZ3NnJPlVTNU9vDPjr6ID58ukH4iZCPRGlNM2mEUybEmy1o8zRph3OPInaynGzCpjQ0qc8MiT9oBdJeTghXmrVYmOpiA3jt-mIgCwKlD016fWC+niu4VI0kGZfAhn-5Ka0c7fSUPwgR40hvDXuudOIqozpwasAcH8COByY-p3vKGfDORmVz7Yfc1WEPPHnXQeZ201TQDDM5dT2543QdpXMWK8zcqgShvCfMV7uQo5+rHmZryS4nTH50s7+clyPRlo35qCzIDMCwXAYAF7kBZgpVlitYouRC4kp72QSQLpZsCyZMfg6BgLouXkziCbJN9oMNeyllwUIv8VHVb5mzU3pHOpi9QkE5nmKCrz9Qlzbyn84xbsacW0wKgXi6IZ4UQXR9y59i3RKUYiWeLSYPi7KoEuYWN4sl+8fJeIaKXxLqiyS0motJ4yLF0ZpgE3vHNMwCixl--XasvjUSzC4YYU65W7n0X2gjCJCaGq5UyQhREkdQhFOpCuK98qw9I6ZFkClzZMtRD4t6FAtcNNzyWvU1gb3T7zfL0oOplmrUiJXNCJUFK44fJVoS+TDE5hCLkHxG5R8vxYQrPiLMUy6ThkJyLJgik49SQoF080aT6AV0bFzFng1oYKUs8s11kqC1q1XMpQm9FpCxcNYtKsbDKd9UsAzGjqlnO8qx3vLELwR2S8zSKRSIpInpErUzkqW5ZVYMgw46rzlrijgQqt6XhzDC8Tsn20udWLrqkpFD+a0TuRLrFkiydlfeho54zuIzs-jB0ugLMuO5XKcITYBSBZCl0ws+hsYTyI8zKgK8gLROXVHKhWCefnYFlI8hkQ-QCSFycEskA2m-QOy+yDaD5AGuIYGVN6H0RxKUQZgWUqVenwBd+5dZpqxJBW4nJWzW5mze2d9neHVspWTU6vIHM032r+2qCxYu1xC2mDHhjm0ma7M-XNdvZXHrtV6oHUTxekgFrILUi48W5dkbylyraYctFWfwYoKFXmtznp8rw6AHFQ4AJVggrfQnlmCvb8ch2vEx9pVGeh7RhEH2eHnbeC63tHbanU9PeGOyBCzojJucWw3wYv8g2PtiFrELckqggEpxrMBHe8kAto7FivHmNV7ZitJBc49RlYghN9p5I6kAKERJmVlTWUidgOSrcuGnRXJHcCtMCQkCowrWWd7kSxCJPkxioLUO+LBBLsA4GY5dpBZXd5R1Ue2g8eW4M0Vs2bRmWtVKk0NujLo9QDd4yE3cJDYBAWhMDNC6Pmqz20YeAocK3c4HEnKYm0YqD3cf4np+7VCwe7yVOhZlO4OjLe-yMeQYYx7ITCe2EJpl2RjxA1I0Q-b0Y8iTiApKetvdOjQB0NLKQUC-eMYT2wE8gi9qA50j0yL7RQiFrVRdyy3ee6+qASYnsnwPgk7UJUMCGrBy4SmVYmsSsDrENiWxCeaqDPFhhqg0Hd2XHiyK-svUs+tPUh7WPrHtgqH+eNsWqEuQygOH5Drh0oWbE5DYJ7Yy5Obm86JdduRq4Vt7aTv2tf6Xe2wfzh+wQ3SQU7KlvN08WCtQ7orSOzKwztGOv+j4QeEI4oeNjs84j6h+2MiCRAtQuDsqgw4h36PmHwhhAAblYdqO1I-hj1cUFMAsogbIN9Sowi1TRxe0tysoTzIruXMDHPj+1hvcSfuQzHUHCx9WM4cNjRH0AiR2qAcdOPYACD7dqWj8dsGcQMS1-VIBWYeVNb-aOrhqxZS9zC+1SdjmEcaeNdn85ufqhziCAegSo8NCeyk+Mf9yJ7vT-p9h1+GNOEC9nDJ2Q6sdTPHmz+e3I7nbHv3EW23J5qiGBQZRlbo+WIUqGwgAARWsEQlrCEOqwmweh3zmcclO0sI9vZ+5HalygRAr0KBAvmGckMineD5poRJYeYEenwQD0P6iMc+Z0Ht3KVNbRyw-YvHL+T507HTNUI0QQ6PLv5X8utJSQU6bpAyC5MiA5QiITR0yAAAGo6NxZi+yXToLl0YIl3XM2hj2RCzHCJ+pkRewKk8n5FlLBISlEv6shkOfNUMHBNM1M8AXKc5AciVOYXgit0HTnYCN9NMiFbtGQlFyvk1jBLvQpGBSAtc1wO-A5MM8qhEuaoK3CVLQJ7AX8dXjzwwO2H1fWgAAZIsFERBlJgCALyIKEsciO7Maz6jAi5mDM4YA5r551C8nIjZEzcTiFrKxgCwPWsgdx1469XCinwY28FurAGuOHGDAq1719G99cJuZB0od-LNqNjVn4jWbpN1HXTfhvdVkb2ED68deCgi3Nmq+aW-FI+uIH-yD0MYxzyDkQ7SoXklKBW6aVNJvKKTR1ElC9u4YcYQdybVLctpMc4YwaMoEMRMudU28BCjTAgB01ycN06J7CSgLah2QMAfRMew1teUXFY6VpBMMfhYuZ0lbx1-In2RjgIRZBPeEi8WBDBparr7J+681rWokXICNNxm+rd9wL3R880ES6sFvvGx7mdsfFgSPjgQ0vqWISB40alv-3TmdgEQXBWX0keYHwTJB6-cwex4tbj1DKBMg-qQm7b58KvbDcZu-XRqtFIB-9SCY0PfykF0o9DdXvw3bHm97h-vfLsBET7l94I8yfCP33nmb6J+8ffjgf3Xrv9764A8UvukIzEAAh-T5YeUPbAHD+J9RCwe1Q8Hl3Gx+Q-uZGP6y8uph8E9WPsPIaLjyiAs8Ef-UxHm4qR5yEduVYVb310Y54O0e5PYKej6p8M+GBUoLHmVmx8bcxuf2WxgL3q+TfvGpPLn6j5C9eeBuw4wbge0k6C+Vu0s4CW5+a7TNbheezDhL8tnheU14QRL-L1AG5cOOVu7YIBKV6AQqUzoSQNmBznQCaQ+8RlIBC7i+zNewYFCOQPzAJB8FpJZqz1dV7lBTkw4tXqwoP3Oizg0CXCC7DQTMSzfzkwKIYDQoxbmuIsi3g5EgEk9RunXqYQHnryMf10tvc3wAhKmw4Iff3Tbtz64kO+CzzX9dBrzoCa8teTvM37b+d+c8heXRz3vcl177w84qvrrP76982g84JvfOFAaD7qAteFPwPxD46-S8lIwH-nkN2d0Ye5eXnAE959AEK-YBDURRjb167UgGWQc7kaoGQnkR-4ACIBebik2sBUyEAkQOPJpZITVBmGTs4kIpG5AtvFXFCYijOQpGWQdTGpnOSZN7nyJDnVYE52c4udXPw1mcAVbD+68754oJLJ594BpgThNEHgYMAyf-x6Q6ftsie7Og0Lc-S2mnSDngEra3e3Qh3g0GB8Wc25lnRLVZx6mYAYIe+KaJ37N0XZvYPXSBLX2wBRClpzf7UcDjO2t+2+AvPdXXo79M9cPnfJBV3x7nbHj8vfEWX3zBwQKB+dYej+J03o1CfsrSJfky-FbYjS-Zfpwc50Q+ucFEy-LrxPw2OT+JdU-7v9O8H9D9pZw-e8+nx8PNA2+HOdvl-k3-mdJ+GnSzt7Cs6CDp-PfKob3wJ-H8t-ZuTnZ-Hn61Bd+w-bQC3zjwg6D+Y-6PjqyACr+nOa-8v+v0PZ-pL+sn7YVvwt3b+z+w0N-oT3f9m5wjUQG-mrNr+3+tZzQuHAf3wBD-ZLyedKNU-zl86-a-zroX-BZ0n8Xfafzd8n-LP2b83-CgmREEcL-y39ygNLEy8jHbLyYdVRP5yGcAXOvHGc-PYn0Dtu1XHG3kvcauXkQDqdMFAcIqGqSct9WaYAJ9agOmkcZAXPpxp5A7XvxAARKfABR9inBimIDQXTfyUJQ-BSR392odgHJ08AEQLwd5A-5wkDv-EPxUgBAgoBuJB-JQMQcbiVQIC94ELfxkC--HDnkDdA25yoADA8QKMDJAn-1MCLfVMWJFLA75xZRnAlGFsD0fYwKkDNA2QMKxeA1wNR8gXVkTsYNvewI0DHA9qDJVhA25xxVDA7wIiDpA+nH8CQAUuSCDinUuQSCQA4xxMCUgswIosMgvBwotsgy+ySd1A5IIECnNIoLIkEtUoOQdcg3wKiD--bECUhFAqwNaD6grPiSC-AswOgwoAYV38V2gtwJBQBgz8i6C1HPIIEDIJGoKAtUxCYPKCpg1IP+shgvQI-JQgpWzUClgswLDNL4WYN2CTyLwJyCfAhwPyCLfJclmClyBYNDcKg3oIt9CkWYMKRrgxoNOCBAo8h0DYgkYPeDDgxGk+ceg5oNYARsWYNNQNg7hC2Cmgs4PahmdS4KZxngk4MiDIQ80HMBPyR4MGC4Q-4MRCQANoGYVhg1H2xD0Q24IBCOkIlkMNPg1H2JDW0MFAJDtgi3z8VZg5oyOCygm4JpD2oO9xxC1gtkOpCIQgQMfMyQ4pzrNGQhoPhDKg1IJ-5EdXEOKcxQ0EL+DCQzEPv4xBWYPlCfgtkXCDZQgQJuIHwPkLwcNQrkNeDUg8TlmDxOXUIRCBA+gn2Cs4QUO6C1Q1IIVgJQvByoJLQyYO5D9Qw0ONCRQswL-xFQh1EdDFgpoNfMBA6zlmCnOH0OZDnQswIQAiQeoy1D2sM8i7hBiEMJeCTQ1IOpFow-VjdCVIKHC7wPmRQPwt0xSwRPRMHBoLUlYYEqnvhuZdgFghq5PMVj9LhGB0x8IXQZ1+Ch4FRgnsMMWQB8BQmN+2M8-2PXjOZWwz9lIo2Qmiit8wLIwVghnHaQQF9iQB6x0RTBR7C2Y0JWTB1UakEMDYAmpF7n6pb0dsM7CWlHnCnZAA60FudzQT0L5x+5bcL7DdwiPyt9HwI8LSDdPMbBsQOwi8MNVIuW2QPC1gvvzAIOvM8KfCWwy8KjZrwqDlvCFYAgUfCdwl8PagAA-fyAiRgloOsB7w29Gz9CCf3wwCZ4B9EWAAAHwwiYAifxz91-NCI+xMI7CKFAkIl7DX8A-AiOOQiInCJX92uJNgoixUQiKwjSOMf1v8E2dAM-9KIk5FvD7-GZ0Q9+5UiNQJwRa8S4jDw2CLSDNYBCLGwvBMCOfC68cfgAB2KfmoA4AMADwARwJ-gO94-WSL-D+qcfkn4v+FSMcJsAdSICQPbB3x0jTGCe3H4VQURC-4zxfoAvEhaZhUdhbwoQO5tkQdAGUAVwB4UYQHImACcim8FJlm1qcIsRLFArQ-EToEpX-QABWJBjshDDIrkzFwwGQXUJShBriHD5EEKPaRPPHpEwkZUFIEhdGGbmVb4LI88N0j5Itfin55Av-mf4yo38KsjEaD-in4tFNOw-DAQ8nTsFR-cqMai9I5gBiip+bQLPtzI7SJ6iv7RSMGjWosAVvCho+8I2NuohqPGj+oqfmsDhou4wWjwIyqKYAlIr-goApohMDEjUff-wsD+IryBkixo6yNv5DI45Tx56gc6MWjLopgAGiv+J0Vylpo8SI8DB3LqPqjNokgHH5noiCBCDaorSIRYLopqKuiIIOvGBR3oo6NYBAg06Na4NouSL+jmAHaIggcVYGPujfon8FRiWo1MXjQ2o28JiDvo0aIejwYp6MGjezTSKxjkYnGKYBP+CCGPVCY8SPSCEYrVx+jaY-6Kn4KLTGKRiKolGPpi7+bixQoDo9qMKC2YmmP5i6Ynvi-5yJamL5jeoraLRjzQPzRhjinFWIS05os6IViloimN2jWg3mI5ipY8fkh59YgrVYY1YvBxaCCtLWJBikeMGL6iJ+SmL8BBg0-hmjkQMYP8UCBHWMeiAY80FzCYI2GJmC2Yn2PJi-YkABWC3Y8SJWDbYyWMViBY8OIOCo42GIODY40OMdiGY80Eu4bw8SIuCQ4o2Pji6Y8OItjA49WJAAHg-ONJjsYrmK-5vg5OLLjvgtOILjdYzOMBD3VHONhiQQpuKrjOY5aK-5mdeuKtiQAaEMrjQYsmMdji412I7iy45EK9jQaZuMej1+eyOwA0QaeKHjsQ7uLHjq4iHin4KQgFEHiyqPeL0NR4+2PHito1uL8UD49qDpCT4vXgdjz4vGNgVzHViNf96bI2yXBJHF9FvC2Q1xz9YF4sOOqjCLNeLKpeQ72P-iM4jfk+0r4mHj+1b43MjPiBY1uKVDoE8AGF0wEnuONiqo+yLAAFjYBPagNQzeNPjt4pgCXiIIDTjwSwOSSLgTLI3WNIS4IlBLNDqE++IFiZY7HgZAKEgiGKx0EreN7imATHi-4mQDhK+j54jBMLjx+VhOPDvQDhJPDuEohN4TlYwonp8OEwMKYSEEumIMjAY2MIcIUEiMLjCr1WVlcpqabATKwlkMUXSiXiTKNJBsoxYEA9FMXTFj4iJRkxjAwwf7hoSJ7L-hOj4eNxMRov+LRUtiQEj4LsFvE-qgETPEu42CS68ARL8TRYmaJOigk5hJNAIIVaOpiIkkgF2jok1yPEjkkiWNSTEk80E+iUkhJJejiWfxPagCknJKKTAY+GK8TKk-2ItxB3TJM7j4Y+JLUTa4ujUKTWkiCFHN40UpPNBiY1xNqS0gnBA6TsYr-mPVekoZO60Wk0ZPRjUxLEBGTaYr-iIASACZPFjpkxZIggFQrfgX5ck2WM1iYk8SOqCKkzpOtiCOKb0GTBtCZNK1Y43ZLISPYwYKET7klELZjbk-2NHMOE4ONAjBkmONLih4n5K+STknDmVRydQ6LLjU4l5MGS840FKHi84gFJmSkQorWhSyqCuLhSNkvpOPIOExuIhTAUruN+SAkytWxT4U4eKZwOEkeNRSpYr-lniOEqlMJS0UrEJXiOEjeNpSKUiCCPjDNJFPag2Um5MGSb4jlPNAb48lMLjfEpF2fiwPN+NnMP4-hy-jxIn+J3YtwnFNLMOE0BPlSiUqUI4S1U5lKFSIIJUOkS0ElVLpSCEvFPwScE7lMBSDQo1MoScJB8IuToCC1KY54IzVK-sv+BWD5TOE01KJSGk9qOETrUwFJPDXUmRP1SWUz8KXBlE3R0dT3EzRMjD+gJVK0To0xH1cpEoTtEsSYqC6G8j4AJ4SHI9cI3EWFnHSMXQtBEsbBKFkYXuCljGksuJTDEhVrFvCoxL6PBd3KItITRaYtNzUgwzdah696+K7HcBhARnHgFpRUkDLUJjKQFmB8EWYBP5YoNVGe4sEbEUYR1RacHxwFCWGynx8QUbzZ5x018gJtlUfnyYQHpcyD1RegbHxfBhfNoGfJ7yA60MJ9yV821wWGcrB1Bh0+oFHS3pVuXUgmfcUDnSypUCl7kYlX4jz5YIcBHxxOfHa3XDSo7SN4S6Ewoitl5YiyN4SJEpjmZjgg6gRJiEWXhLsiIIQIW2S7Y3sMwT0eKfl8wDk+DJtNpI0f05iMEKfjQyRopDONiSMr-lwyy05QIQzgMijLETu+Kfln5yMpHlAyQBAwFKTEBQ7gYz2MrDLAzN+NjMwymMwWP7i3pbjPozCMqDKwyFEjgLHVDESDJAysM8OIEDaM9rCkz5omTNEzW4kwPQyS0rVPNAu-STIIytM5TNEzTYrpPqlQ8XjP0zmwwzMsVrM07hMzeM6TPMzdYhRMUklMxjN1jw4whRczZEkTI8y8YwJTwSeM3hQTk-LE9yL5Qje-xESfM32MAT2gWIQwwxU2awZttEKVMKd8MjHzGwiMrDP4SIIDSPScX4szybFcnOx3ydHHNYPCz-OPLO0zxoqjIghFLDlPCzL2BrMejLMnnghcwsqTP7IVsTdJKhNMAmw+hMAEcgToUqeSJsSNmNcNMF44EEJSYisEHDZCyEDcDDViRb0EHICeVqwMzxo80Agg3jW41uc2s252p58A3nkXs2iY0QDBowWKXhBBjYY3VsKEW5wkBFUfoGqEbs8HX7ljIAu2w4OEjr2NEwWYQlfcUAnaHbFSsK-WGYfsuHXqztI6HKkE-BKfjMi1g67LkhowDyNR87AHwFmA2EQQEb5XspVGFFPs6cLKILEFQXiykeeHMMAVQbDK-4bfI1KGsxrbSnSkqcrKVud0KfLVMg+6N7KJy0coMCCQWkcnLyybbbUWJyLLdrwTADjanh-J47UXL5zZeSH0OzU3aYFvCqvS7KWJozTqCpyr0bsEh9sceBRxBRccTl0TspY3lGhceFMEdxAwDhXztf+TTFvx2XPZBKFukYgGUIgoVnI5TUc5dKJBt8J9JYpcTfUBZAmAeYQugXc-rw4pskN-AZAExE-BZgwWLcko1hrK0h0oUge0gUododOzUhYbfRFawYlYZmEItyJV2SBZAF8AJz3s23PB1CWc2WU0QcUVy7xWsJyzApPKSCl19Q1OCmV8KEeV2QpYZNCg2Y1ELChwpv5TCUIoBfZ7m2zU6BSjfBmcyXJuNU3NYMZytKfxBZz48+CCmhZgHlC9z5IauzgcRgwHKlYtyCJAtIN8qnKmJ6w9yhvwlpXMigV6gO7OwQhjRPF54jckYK1YVwPQjZ9OaTW2aJr8lxIfDBI2sGJw2ce2gxR3bFXPEi1rN7Ql0wZKNSRccHEYM5DWQVc3T5I8vGDvofMFwisJH85SXsl7wntlvDJUC-Jel2ZTHCXEKxOtKNJFZBArhRykW-IeyH8iFyfzUfQchnS8GPtKZBw5PQmQLNXUrNwjCCAAuFwPXEAswBbwyoEUh1bWNI3g7rdBSvNMSH6kSgXwKwWQLYhaon8gJCsBCAkQAWIResNC12XgBk+WIR0krUmu24LaIwglAkKI00GPhK2P-L4KuWL-zF8ZBBNhsLMcFMBahVWLpzOgwPFcWFwtnLnED8p7ewvKwvCrlh8K1SXUFcK2ndwtvDSC8twplYY0grPzyC1mV0Lb87TCVdzIO-MezcvEVlG9m5ChEHIRCJnjftMbKBEYQWRF8Grl3CgSJQCQJBs1z9gCylBojUA3gshRACuwr3YHC2bicKCcFwvWg3CwPF-zqi2bjMLUIidkfRPC1nG8LUWPwt5wPImQSCL2cXbh6L0jCIv6Kqi5fyaKUcFov4L6iiVDwK1IHQuVlIFYgq5kvo9qNccMCiF3FYEaQ0kLBBoVdxV4WC4hlVsc+a2hoU-I2CC0EHExhC643oQ0mXToFa2x2zhQO4pxZNLCyytApc241oFZc4Ep0hQSx4q0lNcJXPJoKaAOMxIGYQsOlZiwraGIA3oJQH+wtYP7zxE8xEEoeLuLavFrD7nHjgU4tjUkq4sVAcEpnyU3cmhlAYfXgPh8OvFtKQBXYv7xlh2S-VFptQvM4zpKwSzSl5xkSmnkFA2SiZ15Qp7aHy0AXvIGJ5x3AdhEQ9BQM9wW5eS3exTQH5OErJLGEKgW9sRSx4qylPmLBEeJ0NYkBXxu4Sbx2SIgHwG7RJQGgntLu0IYHRZthY0vJKIsF0szBdvW9F1L7i+kqrwx4H0uwB6iqUoVK9yXgLEQNS2sC1KxUdUoMRiAOMsjKBwjY0TLNwFMrZgJ2KL1oFYSwMs0sQy1d27Q1QL-jaj8y+EvJKiyh0szAcMc0AlzS0Csv1K9CSjRAQ2yixQlz3JT0tEsdS7spbLNDEADbLOy+suNk+yrSxakxy4-3bKrSTsqbKgyrS1ShJy1suHLBy0cr1L5ykB13yAyyspUApiMXz8lGERnw+ZX04kEDcGuL3C65D3bmjbk6sIFzZ4vcLRF7o50yMBaZuQMdVI4Li+tKwEw8t3JuZBiYOxoKCrOguqYdtWBTxxHikHD1Ag8kPIxwwUV3Pbxts9bymoAKpbj4AZciyOQqowawGwpEchbB2VDyDCrpFg7JgCazuwQ6GmBoS+7y9RMKrO0qhKoLHkwRSQbV2oqiKrCuwofoLHkx5SOWgXuMgoGipXtxciEtnzWsQ8hFzORKzFor6y6MwlLZpefjFQBZFV3RNZgJUDYBIgB4RWBIgAAC01QdfPrp+K7Cu5EashDJiK1gs7LILSROElxM-ywqAArnijIuAqjSMRTAqfhDYQblSJBKCYqKTBY1AJljGc0zkQ04XKcosqfStXtUKmXKC5zWUfxCqSK9fix5OwMACrwaoY7OMqqaMQQzAeKBKuMJYIDgD2DDOQLiCrhkEKstAwq0SpM4qOKKtYraKyIFiqFsUEByr7aVrKkya7Z3Lgrw8visqqV7dTNYFDuEytOyt8cyv9wfKFui8rrK8aPEriKrYkVZO8P0hDsgWQCvvypIR-IoQYlAPJ8rO0DLLLQvIAo1iMkSX42BN4AbExehcTJEzKMD7VI3CKYTTI3Wp4TLyqRNLyGMS+N0TZ6D2r-jcGGOqCTGjDzDITC6oQBYTa6vJN9q-E2jS+UfuVhtpqhriOQ5qmUDBrqJF4mdx4wTqBhqZqlSFvDgAUi3YtozLqx3Mdlciz-IzyDPCuMVHcStbClC+BHkoQ7FK3bApALmyZgyQeMHyNcTZnnjhEC4msRpSa60HyNqaohS9IWakKvZraa9QRa0olKMxkKimOQrFxcaYqCsE+a1Au5rVCmIoFqPyk3RFrEyWQo2Y-qGWo6h-cIsFIQ8ZS0DlrLrFg2Z09QL0RKYka2ElhhcMumvcgkivQvNAXrEynOKcvCFyGq9eKalbC7K2gsWr6C5atawdge-ywQl3GCDkAggLxxDUschCBJwV3V-OUAojR6viMIAQ6ocQTqwkzOrvq3opXBfqq6pqM10PGDs4Qaravjqw6ROvBg8YD6vyZaMQphJNM6+4WqNS6oGuZw+UVGvRqxzaWrpEJ7UmssklIK9FoVtID5jxoHafIzQJ8cXmvbq2a1Apllu6wWuVrpC1WqKZUbC2D4IdgRizsgIaS0GUKUkeWvF1agE2rkkYYeMF7qmfMaFXUHEDnHnBDakiTlBT6i9MusBa+MGMBvQYADQJ6QXAUSkrwW2mx89QQ+o+YeRQ0iKM+A5+oflWvIInfqWRR6FDw0JAumwD96m2sRlkizQr3qEhAaqacuVR1DaNWa2+U9qgK72pAqJCZYFDrUxFlADr5EIOoJAVBMOp-II60fDUA5QGOrjq0TeIz-wk6v-BTrPq6CXOqM6y6rrra0Fhvzq8jQuoYaw6JhstoggButOrK6io2rquGskzXQWGqkzqpm6qMzbrhoDutQKu66a1LZ3EPups0gWZJx7B4CEesxqMGuvH5qEa6es-MMa0WqhMF68vPsACGwauHJV61ew3qd6+BG3qN4U2rMb4weAkukj6u6BPr4CG+vgRL6tAkCbz6vesVh763tGAB4CF+uAb-AUBs-qfGkyCZ9f6jcH-qkUWJqAaSoEBqrAP662nAaqZWQCgara9QR0K7agKUQbTKGk1SjdQWHk58GAhpi4p44Pmm4J6gS6QzA6KPQlYDqRZ2vcoxApsKbTaePd2qwQc9YtOxh5GhxTRxRPcRVpaY6ZvEVXoYbWUp3aOmyxBRm0eXEV5Tab3PlSFOSitlBtRSkMQ7oFfJoBt8GQS3JQUGiwsF5EFRE5y76pSFXBDmt8CRNkYFkGQAe4dsDwBuwJbhORnm1fOlB-mmgFYN+NeaVmBlASqFGs4waoi6l0iUa3BbIWqFoLoHmwQyZqwAR6HsAM8d5RgAjnVoMKQAQKAAekmgaqCYBgAZyCJb6gRQPbAPLQJkG1MWmgEUCgW6gAdqrU86AilZm5Sn8jAoq8Qdodm67CWa4lTblRbDGzFvU0CQNfH9gdAWaGAAl8KlqsFaYpQsClKGUhHRaVQT0U8bqm8fKJ5OYu+glyJS8KqBKdWwcukrISufKoDfsG0DpxCQG3IPwKzJrAUIbCG4ngkCcDUtnJz078hTBSvThF8t2hNkA5qk5fajIknKCY35ofVFlR68fANUT7VRvIEIc4rc61o7DTCHnGsksC26wRc+cGtytaR8DsJlEecQKX2LgpXUHjbs22-VlIunOVLyrB4Yto4VawJNpKcZQatpzaLRCPH8L4QHtnWsWeKJGUlUATaDXSXIfoFgI3W31tfNASfmDQ8gs6yLOADgYEH+A1gWsGWVyHA4COdywTYFrAwoilCi8W05aqcpo28wBHhvLNlUqRSQHpgvTS2t4qrxb0WmMYi9oLlsvFrxCCWAsvq1lExLsHCaw6hJjIIxfAwov6ivbKSxCJQCcnHh3DwBCu1xSKG89JXil5EZKPZBv2nRVggU2-EB7aWUGZXhYoAJIAl8uVVvDA94xG+GPxqgdsUlATs3fMbba284hQL8dOmA2sjGmZqXwlCpa1u5sCtQT5bReHynMalGjQvsyv7JQqG49ocmEOhhuDjpGbYhUEH701JLrjMstpHzF4t0+EjpFF9Cx2orbcC4jqzaa21QliEEOzACQ6Wamjqco6OkYywBGOpSHT4D5VjsKx2O9QU47VGkAH47eO10Bs6rBITrT5ROsai0KZOlTqba2YcjoMKna9WxsDBm0tOGb1mlWjFTB5TrEmbwc4ISzsteMOw6zx6jqB-pY7GEoVbkoVOyYh4EJ3MsqRqzO06qMMBu2DtbUPukbtsugyqEZCursJoNiu7CllBCuiaqbSUamVIYUopNNrQysNNCWGr9qg0AbtrI6rrhIAKvcvhAVqrysWNtIdavfj-cEMAp9Y8h8Py6-sqDjRLEyDEvn0iwt9v0J5QJ+SLtCXH9qljUHKHy4yhChrv4tU2mKXTbYhNGvM7LOuLuRaNCggq6NKu-Wrbx1m4Tq0ULWLo01zdnfLthgHYRS0AVeqSgr67kGvSBUDiAoZsHgRm4LpQCJm7rCmbIule2i6vmfLMLiU7OIES6xK5Lvi6rSNOwJQvIGZisq7u3Lpq62KgrrNyliO7tK64ScrtC1Ku+ujy62K+ujq7QC2GI06oCpcGwKNCoatx6uupqJ66JKzqv668G1aqWNRuiVPG7kJUhCm7+5Gbpzs5gqCXRKCwpbqxKVu7iiv0vi1gq27C4nbsrTRsb+Ma6juhjtWsNC80DO6rzeVqljO6tPhu7l7AyvT5HOjQr8VcqD6BUjnuhAre6ZQD7qMoo6bQt+7bu-7oSKJIVaP+cQeh7tGbGiyHt2wIuoO0J7DS+Hti7+qJHvR447VHtN6UujHrS6CBHHqy6AK-Ht67I+03KK6+ux2jK6H9B7wmqae2iou7dLfbsZ6deh6Ga60+dnqy7OevSO57-uyVEG79q4bt8qNqlJkm6PIabsj6pe+buKpFuwoQV6r0VbuV6Nu1XpKZf2q-1262rbXsO6a+47pa7DelupZq0eq7rqrnpb3rYr7um3uiURAErUGgw4J3te6SmN3onrvuigp37m7c7IhdPogPoC7QeoLrGbb-UPvOxoeiPqi6o+mSLR6Y7BPsNak+9HoKJMetMux7Mujrrx7aeUvth7pQdXITR8+7nop6K-Knub7ae8vtAUGe8tOr7bJPXpO76+yAcb75ItAdv7MuNvvmMO+oXv8qRe9n3F7nXSXu3YH21MXahZelKBfbg8bEuSgle9brj5q8Tfk6gZ+iPgVrK+7AcX7cBv0lZ7TutfqMaN+6Tot67u63se60+O3tei7QZ3vP7Cez7o96fu4xj+7d+u-uqZeAx-sLiMMMHtf7X40Lumwoe8Psq64e3-qAH-+pLocHUug6PV4sKqWgSdR-YiuYAYS4iuSgQwVPtd6sK5Wh-6vB2nr4AABjnlp7-B9hNcG0+iAfmNLeo11ghiu5WiOQkSr1xIHCQDwfgGkhiLCIH3zLqWK6acrIesASh+npEGh4pntr62e1Bo57C+pvpgGyhnkTUhyB8wEoGVjYXuCdReyn1gx0yxkylopeqb0ZMQhnOysRB+xqGH6GBV9rH7uBmACiRvyFXr4HSQafu27awkysoCWCEOXuEmZLyk26lQEJpnhAPYiRoaWVb8n9BmEd8i0R3i2pG+xnWk4ZXcw1C4ZLyKcy-kkFogCaK-4Dh04euckUJDgKrLezHiW4lIoIfeG4-YfneHto+BBQERhhT3vDzoU4ZGhLh-hiUGNC0ZQTsz+jjoGHSalRyfr92AKO6qWWtBxMqERldyRGS8uEZDixKkYYKIlQKGIgBfh00GZKaeBfuUtdeiQf16pB87tkHvu6YHkGBh+7pCbyRigEUGOAYTvRGXulmuxHUCyFqxHghs3s97dBm-uyHt81rGDlPQMOU-zVeukfqSjh3KOXdYIekZsTslbkHZd9VBzlhGwA+kfr9JrYAAr4wAYnQzhFAnjKJHIm5KlRH3lTJV6VJRoxulHrOtsHs0sWmbRMaOkUEE2B6k0lvtHHR4QGdHqBV0etqg+8UeqVvR9QblHJBFUBxHLLEYa+cq+sQeZ6DOzkdX7uRoAc36+R7fryHjOxEeeGRRxMbT4JR1MfT4-RvOF9H5R20ajHRkGMcJHpO6-ryGYHAHviDgep-qD7we8ZssGzsObAndbB0IZj6TG5Pvj6nBxHrnHk+7kQyF3BuwbCHaKnwepHohjqACG4h0EcJAQhzwYsjiKiId8GdxlJlT6Mu9rsSHih60HJx0+yAezG03UoZyHCupezvGyer+3c8Bh6noJ70xuntLTcoJoaPHch1IfyGGhuK2xrUhv8ez7IRpAYktKhsqmqHl+uvrqGG+yCb+jXxloYG7CpIbrWrOh6ge6HaB3vv6G1x2bq8TLRsYdTZH29hsXM2B+XpmGSwuYdmBXII0iWGsEVYfV71h0ASQnWQnAfzHMYQsZAAjejGpN7Fx-0e+7+R9wf1q95K2XiDkC3BkxHGx9wbN74waYFiFVwGZg6Z4IRNwU1IqujQDJykckHQBAgckr0KupdsB0mjUbjQgAqW3+hbs1BeMAUnv840kMnFCuoDMmVAPQp35vJlUCP51Gg3vdGxRusbo08VNFQJUMVFycNJ6gWUZUn3hhUZ0HL8z8YB6sgwcZMHAu4PuMKw6IeWsHJxmbuPH3MqzscHE+iSbcllxkt2KH1xk8dp6txoEr8GOoUXECHUh6qe0jTxyIal4LxpqbiHrx3HoFHPBc8ckrGpqCRkqwOrSHwnBewiYDMaBnvtgxXxonrz6ZJr8eQHoJ38dfHAJkwfq7cxtkaX68BlfpSC2u+ofJ6uepoZKGRh6O38aFMm8fMAz6tkAvrERxmqCaWs0tHmiIqvIcY4HNIiBfBAR69qRKrEVkbpgmu1CYN6RJ6QfEmuOtRqZh4pw8Yun2oUUeE749J6zT5ym2ScqbeR4GgSFXEgYcY4UkqicYHZKiYZWgph0gKYmtoFia9aOJ-gd2dBB4Gjn6teg7p2nxBnJEkH4wUSdbqOOnkfN7yxu8ehnrAaIFhmHOj0cfU7phseKH2a8kFzZuxr3t7H+xuZOMGv7UwZf6Q+scfC78pnPp94ZxkgDj6UewAbKmXBlcd6mM+3frGmZjdvoIm-K6aeInZp02n-HYB3Po-HEBgoZYsUBkvttnsKjaYVmtp0QcZnBJlmYOn7EI6bGqmh7CiFrAFFc2PVrpl6CCbgmh6a8rbp1Qpyg0sf4b44YaO7o+mM8DhJQm9ptPnvqpCsSY5mSxnjsOgQzD03s7BOj0cRntBlGYQb0Z7zpeSGBjIcJn8whiZH7SZrgYloeB4uxWHyqGmYrFhBgGcil2R5meEm2Z9fpLG5B7mYArzGvOYLBBZkKY0LhZtS0xG9uTQfd79ay1irnpZ0noB6nNeWY9rn+rKZC6tsMLrynVx7-sKmEsuLpKndZiGeAGKptwfTHWpiEYEq6pqIaGnLx-cZanpxtqfCGOpoKAamP5g2ekiqpiifCS8Zv6ZonmBp9uJmsHDgZW7tcyme7mBBtYdn7NerAaqGBJmoa5HjeguYknN+6SfTHZJ4KeE6ItJzRi0fRqwSbHAWNPjAnsxxKZ7GUp33v9xStPec8lMpkcbf6VZ0+Zh7sKp+f4y9Z5Hr-nds4qf1nKp7Ge-nn592dfnOp9+e6mVxg8b5m+Ft4YEqzx7cdkWRpktzInH50BeGHghnGdFjIFmXoW65e1ubgWx+pfGHTicwu14HOJnuZQWhB3iYHmQZX2ZHmwZ3BdvnkWpjv37BtKUdUnJrTGtoXgh1GagbkZ22tRnXOnjCQamF+mSeTpQjAahV2F8wasd3+icbPm7ZjWaKmr5hLqEX4lmADj775tJbKGlFy3pwry-eqa6mNFiLEtGL5pflorVF8pfUXQBrGfImhhnZPAXxSgmdonWBjKHYHHrFbsA9LF+XOsWu5wRLsXuJ1Bf7mGZwGaHmWe1xeLG8FiJunrFJAzsbFtym2n6DBgigFmh9OzGEulSSv4a8g9lvUq6tcaA4z2hByJKrcDAp6etXAjl+4o01dO+5nebPmyhb8X-RxYBW4SMuGdrGNCnxbuW-AB5dkAOwGhffGrsuhbUbnrUJbgaKmiJYxnNW5cDltRzVhcwbA7KcZqWJ2rJcEWFx2+fKn0eoBYl7++xgel6WB4xZbnphsxeYnFhyfuWHRl5BfGWHFi9nQXkJzBeBnYhCxtnmNCq4t+KNwEpdRmpZ6FfCXpOyJfhXPyuc13JkVg6USXlZ4+asGw+tWfPmMly+dj65xnWdTo-+0RYfnsh4pap7pF-+YqXQBhRaPHFV2pZUWclgBbkXNF8Acjn3p6ErUWBKrgZGnTWlErsq2h7ysmmLZiKgm6xe3vvmm4B0FZJ6BR5aaL6ihtadOmPZ-sKZX+JvMawWZAw6YwnjpxobdmacvpPFWb6gJf9WEBoJbo6I5x6fCaY5skdzW7p3iyAk8qrSYSHzAXlYGm7V92YdW8eYStGpMh4OYWmHZ-QYL6E1qCeL70B4OfDXEJpxaBns5oKYIHbxp2dgmeesoYKIVg+OcehZoHNbjno5o7ljn9qqdeLWXp7WLem057Dk+n9Mz22UXmh9OYvJRY4AH+G35+1eGm8eJ1b3s+Jzq37WORk7tZm3F9Pk5n2A1NfPr014nszX3h4JYKJ4ZpztgBf9ZPnUKkp-0BhWhVuFZwKd87aemXdp29ZX7QZ+ZY8W5JSdbTXNpcufnmROv9YD0AN8NEVGRoEDdrmFO1dZdEG58UuJXoFkxfJW+l2YY7n2QRBdpXqZ+xdpmBwmu0GnT1+rCErmR-6amXB56DeHm71uDZwXH18eaknJ5mScFqr1JDdfWQV99cBGv1ueeE7F5ihbTHsh8WY3n+V5KcDXJlyDe42mZ2Zb43R5mQaE2uZ66D0Hm7MTZTXxg5De-Wfl+w1XVL1RTZXmourQfXnJZtTZM3eegHoOCJVhJdRWdyTuG-HKNYy16hLLOrslQLIKnGawpAyMWAt-Hf3PMFiQXkrtafVgqeNWMV5VeAHVV7VucGU+nqa-6tViRZNWpFspZPWa1s9eanqllLZKWSEs1f1Wrxvvu-6B+rpdJWelxiYpWtoCmepXbFule-H1hwUppKZF1jbkWL1zja03nFmNaUh9NqwV83QQtSZwAX1u6bfXFpz9bo6aFkNmuKeVnmcTmoV3DcFX8N5E0Q8lOkbZvXeN-aaLGBN4UCBtptyGefWLN19ZQ2UoLlawAbitOdhhAN6uftrQNuuYMGjSK4PSmFZzIam3-NgcsC24YYLaAnQtynGpwu-KLeYGYt5SRmMq8acAS2A2uaeS3teTWbyWVVnJfVXstoBZAX0Vyrd1XKt2tbK29F-Ld3XsKepeK2Q50rZy2CV+raJWm5+iea3TFyjZLD2tmxapmEEBjYrFet3iqJ2admSsjXr1mZYLG718bYfXztvzas7PF48juIp1hbZbWltyaxW3jGble4QBRlLOw2gN+Bve3dtnnbyq+1kXaEmxd07fzn0+AHel25JH0Xl27tjKAe2Ug9Xd36r0V7bCWa5nObA2K20VYkgng37f3mWpC7cB3TLEa0mBQdzafB3wtioOh2KEWHc2hZ0+LcjKQcAUty3eFsneEXMV+cdKmcVjVcKWPBirZ1Wit-rZK22Nz+fK20dn+bqXqtxpdq26d2AYa2oFuiefaWt1na2gEFjrc53cljXt52WNovcG3614be9moNnTdF3YNibY46Ldy7rklyazKzQ69rR6GpruzV5YSnkoFZuuWr3XICSRha4hUQLAlwhdMajO1Idhmua0uW32M1isdlqN51ffTdp+C9nZXkLKus7t1aqWqU2yh0moNqXdgVbd2QZz7YC5GdxvZZ27QFbvZ2RltXu63UF-sbxr-OjKYPmOFiwZlXxxvh0KWQ7PPex2M9m+ZEWcdsRfIn8d-Pe73qd4vfkWv57A-ancDkAYtWse2YXLXdCu8arWGlgbcdW+9l8dOnm1sFaWm21wPZdn3B0dbWmKh0odAnT98CaDXqDSnppHeD0dYjWr1iju02XF-AfQnCBzCcnpTpnCf56JpkbqmnPVnoam7mqyg8rXbV2g572Rphg8bW3ZkOx33eetg5WnO1svu7XclzcsO2jdyQaHWK1hCdj7DoXGpsCAKQmtKGKPTLifSuQKiypzASlOfJ2S2LdY9t11-qc3WM5w9ePXC9vA972ONoXckPRt1lfvX4Ny3euXrNmjRP3pN8Cc7rcM7Xbw33d7-YN2uN5I4HXp60fcE2FljI-36sj74P-ICalzq23gNnbaKOCNpOfoHCVxuca2h+8jZJnWt9ubW6aNtvaQX6N+lcY3SOZjerW4j+g4SOJDrOZg33dyo9yXEpghZVGxNzI6E0mNfSeyPFtw8a-XRZqhdc3lR5obQX5jllfKPTd9maqOEN4TeM2Tj1ew2PajrY8k0IaPGo8O2wQ47Yr2aq-q3mfehFcfyRsLzYMkpV7KZSWEDnhaQOy9pVdnH0trHay2QB2rbx2897wYL29VqvZL3Sdog9-mSD4ndp3Oj+ne6P697pev0KNgA6o2hj4Zc26uJ0A4j4u96Y9IPZj940SOFj47aWOJdzmeu6RN3fbX2kNkbF2PFd-Y7o6vj9MZ+OtttzdOPNNgfakOY1-jbN2VjyGa5P7j3lfUFFgNU-VO1T8zb3J+ToFiYARTlezFOcNiU+8PolntMKhfdthdRXUdmLsyW0t6+bVWETgpYztiN11gKnzQGKLTiGT3VvY3pc0qqp2CiRXKG3JUdgppXLW63IZxdElk4uPFjoKbM6ztnkZZbWT3TeABFJY2vXBraU4DdgN4FsaztSa+YDVbPRVzFlPnrD7YI2AuQ3Z43kznOaUgOToTcTPoz47dTOmcNiBShYaLM7zc7u-M-Va32+jpjOa52Fc+2Ae2eOBPb82eKcVgcUXAYDYaz8mblCLF23-SfyHuQbNvWzQiXOLcP1qjPo1lI-G2iiYc+GoB6ruqKJacCmpn2yiR6GPOUqbs2POurR8ryWGRdsEIdllOXGeBkAI5zlwHzdkoes20xYDpNG6nnwtIOAGXerOs4t6UHYPBYAD3PXK1xByUbz4gFYMkYYEDgXSsU7T4J9z09NXOSFYyWEh14MwBtA9fTTHpGPIJyceavISC4KhXmnkA+bHoL8+lN3bW4LYZH6jbQtYeGz+rIv+gJo4d2Mmp2Fv32wTEhs6baZ+SxbFvFYA8b159AGBAzWCqWgRrQLrgEvCJLFsoYOFO0Htc+x5o5120Zto722vtiSHxCLTlFdC2V4iQikg38VyrDNySj1aNJDyKJnbSUQLRqPrSvVWG27E8kPaMt0pELY72At4PdD3PZyE+1WUDjLaCgUDgpdvQXTubp6PJhvo9gXm95KBXwGMKk6n6xl2k8Y3eduNy4Ww+uKrHl5TUlTmTgwEQQf4dMDCmixxOGOtHJ+1EI0izHTc463PLj8bfxDfG-upX2acWy-qubNLBVu1lCaQ4iE+J2K7QBfF3M4hX0u2M-X39QOq5SaGr6UAgbnKJq7suGrvaASR8jt7Y0uv99o-LPSjo7arOhr4AFGvtGg8+jamQY8+n2qrcogvOL4GXZ4vF9g0+SgF9oa+2u-GqVyiV2gSvHguKARC76Wtdxa4HOVrgE4hc2Ukc8yHrT6PttPYT+08y2BFxE-xOiNro5I3f9mBeW6x+jpE58gY2jZAO37WsM3OfZrBccOqDzmO3nTThkMgO-tq0-VnoT-haz2sVzPfQPwb-FYJPa9hnfCuiZyK7huSw0rRdgtMD6RGO6NrnfGP9dqY7KrU52yuw5rku1KTPh9tCbjXIBo1qFvVRozh3XK17Di2TXUkW+N2WurG7T29IjWN4we2GG8ZvR+ksJ+oywrMVEre7RK9RuwDq8i9qdllJk5Chne8ZDYJ0aLEYIaANbLPIiQGoGUILBCajsSi5XG2UAqcPQhnc39QxGCwoNEM693BqpFy-s3nMkeIAT3V+ykAECeyRsQ2gQqGRhzAEfDHaJecuiBKwPYYrtwpij1HNAMI3jGync72y-zvJQUfxzvai5Z3zvx+JO47xU7s8j6JQm0Pmyyy4nzowcI7vS8lWibhVZJvUt4G+yXsVym+Cvk9kOyb0sI1OwCIVgBdr2BDgY4FOcdgdKXz6r03YevLDCDEA4V2QDCULvkoRu-TvoY5Pdz3+7gnbRP+dou8xOwR1Pap6Ar8+6RPGTfWmvuaR2+5gnd7y+8PHtVmkcJ3X7kAAvvcd8RYHKruGe8bBQiBe+dALFSe64UNN1e9BtFhCQ0LuL7yTDWzs2CmW-kUdrE6b0gH2e9AfRARe9xXIH+umzGxmLCsfvAH6e+wf573B-AerSAh+K7vfV4bNcGpv+77AuKwxZJXejslf6Por99qHSeM4dMHB4r0M5pPTbuk9LWvIVK7WQ6zY01ou2UagUuW7Dys9FuQZlruYcKBFnr74nJZ-dERp6xSB-MCbTuTAvZeUEHt2nt8FeZgAuPR5WwDH6nm-WTH9bYfu+VrXYUku7xGijur6mO5aQ47hO-1qPr0s60vVrhR6H3lbpY7T5VH8xIM6NH75Y13joW-ZV21tx3aV2b0Cx5nm2IYx9W21dy3p75Nd-I+tvXHoUY8eLELx+fw9C3x712ol76+qZZrbu+822Hsjc4eor8k5LCYlKS4EJruPM2BRJTKmW-OV8TuDpkuVKRJNvt5NG-ch6b5ueZ2yTzgffbEIfXxnBVI0yK0R54LDQwv8TeUFmB8QHHLdz5hzp+WwFh-7DxgVI6wCX1O9kZ+JOmt0k64fGnraC7yeKCwH8BgiWyY5Bne2yZqh5EY8HpbDEOQF9uarfWxCoDgDRviKKno0ilC-r3u-SWT7hU7hPh79PdHvkT8F9RPcT3+5J2r77E9oqX7ph+r2ablPbr2jFjh-GeLnyZ85AQdDm5RuhniZfpO9D6neYe+9qwpQDS7kIpod37N+6mgKAKUPdoKzoJ5ZnWANI4n21Cy-c6t0dPq+U3JrHZfslUzgxGB0iQQV75m9O2vqQbhBuZ1v86X-O8ZfEXk9CprPtNl7Wv7D4SdrPqj10fU63tcV8+0pXqJWFfZX6poB6lQkF98vr7-y-hOwb0e5r2sXum9OfcX854aeCX44eRvhH0l9EeHnKu5ewa7ztjWchW1V6mglQzV8CfOr93d1fbj93f1f4wJs6p0hdB-j1AAkW2j+k-vFU-8RezxyqwKkUEQuIvus6pnEL7JHi6saH92CGQSLr7Ctf2VCp60WXE3w18d0ydNN9CfM3yMuzfrSXN6rOkGgHp1DqnkE9BeU97A7teoXu0+z2QrqG8fBtb+p6ZutoFYHsAHgb9u9fBntqR4m9u9l+jflH2N-SPFIHUJavdrg97GvWr1Bo1CTXmbeAvWAaJp1C4mnJoSa8msBuPftGtJoUyOLJFFvfsm6UFyb8m6BHbBJrkprUvCj5a60vUp3AkHeXxq9qNUJOn6ChaQ9ntcu1uCYbTfBML5vjJyj2pkDua1EbbKCO1byVbE5WTSTgVfX-Sbgf8GIr1jOLFO6kuM5cPmw8Y4NOd8OI-YAmDmEiv-KIora1itiNm4jQ-CInZksKD4j9WTH1-6pxJAPYsOD1YHeha3LsHf7IIdiLe18o916Vj24tn84T3Et9B77ubTmE61nMd8d8HuMD8g5KX9FpgZxeIrud91utoFetggjc1k1XeutkR4mPHFrV8UfgnkGYl3x9tLaga5JJW79n+XiXU2AWQZEAvfhXya57eDOjpuaAAG3AkPeV9lFokiFuGL-1AIvnAE61PYG84cIJZ-BmtBmI5L8P7t4G8+TxMvr5nTsYGy1JmubNI0JauQWrejhbJgKTQ9MEWiTr1qu6o0LvfkrEyE6a8vz2DAQwv1z+trQ5lWu+pHG6z+ezWTMvG9WXwKrz1Bll1FSiVmdfPSjT5hgs+PgTJ7TUC-nUURFq8uCcQpcbVCkQqGuZvi2vm-xCqTvUbynsO7u4LQgm-3nhxpJa4dwTqZvyraPoZsFvmOF9hpf1i9iOI5yPu1x99Bij-Cn9VcRAOmLcODr3Y-GygG-sGwbl+6Cu8Vy1chvCT6G9Gemd91-nfkoCbLVVhjjndGOubpK55uIN6U7KO+zuCPK-drzjkS+5N5Gfau7CVSU444mzkcq7NCqAmth6f344-3ddzS4BeLvxYAdDrvy0+TmewvD4SXsOZ1ls4ToD764+6Iuosvk-vz77gCU-BALT86yzhPag27oeNcc0V5A4ROYfx07h-DPqcexf2Hsz7xePXlbox+RyOz7GO8fzGZKOo35rtJV4pEKSSkGzKGcZ-jofNrbbC2xKTYCQPrn76ajSNAgg+nYAX4HY6PsTjeFxfhzj-yBuTiJl-Gi3iMf9pi0ZbV+XHCto8uaDGD8RbRrQ+hC3V7wpR7yrmwXIDVmTAOscv1e6D-ADz-Ov1g-S5hD9t0bpEJ2BQjpbp+IETJV2mY47PD0H92pd4NaTVJPly64Vc-64jk-I9vQnwtYthHfj3sy9T5tfR37X-teybqm-h+jP0BdneTftH46hl64b+dRV7QR862rfhz77mnPu39ZXXawsDE+eFS1+9C+flFZD-r2MP73Cy2MX9mdsphdhrYfvlzl98Af+AKB+lfhTynYwfmAU0-gJ9QtJn8JOkfk6-inoR8mVgkoJMBqLEX9qQMSJ6sKX8zoCACK-O2BK-rX5LnGqAa-opAc-jJ892EPlG-kyBm-liJW-lrB2-gKpO-hIoL-kIcK-N-QrSFJ9B-gQCKcBHsodmP9gLBP9VAFP9ULsjtZ-lr9ofgv8R7nr9QIqFcTPkb8GbuZ825h1A7GkXImnNv816nv929r3MEhFKcMFtVc+zkNU-8Of8e-qooAesGEb-j3c7-lRwH-u1BrOBH8X-n-lyIiMUKPq-95fm35Ffu74FPOYDAAXEVgAU5cM-hADwAT4h8AWHs8-vkVUKIX90PogCS-vYDrEGgDsahgDjnGf4sAVc5cAVtJIASvoG-sDYm-uTIyAcGMKAaIRqAd39QQsf5+-t5d+wuHtIdpFsOAcwMuAYjs1PnwCx7n5d5-np8dPnfMRAVO9EfjO9kfn-sJnit1-AEN0rPjv9rQJb9cfof9VAcf9CfutclHq10A5ll0PPvJEqalYl6fPjgoGq308JmbN3Vl30FBBwplBElRufrokHCNa9qgba9agRTdoXo0C6trTciTqZ9JAev8LPlwNYwlXJPIuR4lATj8O9sM8DtsMDtXnxtDvl-gVdEzgFvnokFPK2dpIBuAOzgBUuzoWcjoKZRTZvMYOcKW8GYP8CYAICCndi9tFLClBSnpz9zvv78JIMrgg-sO8Q7GE9+BAZ0bDoFkhfnTFCsmuQ8Em78JjmL5UfFjZWkALlggRMJtEhp01UCYAK5D-kzMtp86YihlDet5lSbo9EOQQFJSkmSC+5mpAuQI61mQa8JgAB0dEYjVNNxkwAYMqxl1olKCX5k7Ev+K5J7ONvwFQYVtBMt3NhMqfdW4ifwn+AAIh2E2llQVxk8Mi8CXPpIMBQTb8jCtYUtirYUdip7lg7PJ1DCgT91ARjdl+g78ook782Akx1HQe78spPkUvQSmEnQX78mHNj48hCz0RkLfgfALfl+vDpBO0CxI86CoQtRqGc1Hs0Ay-ujgowSrRMQFGDSsJnBdII5B6gB9BXcrKQLoPuFSQDEp-cnMk80inhoNOngLyLDlQYl5EOFOPxiQdaRkcpl5swRwpcwRTYCcL85sfkyAqQVeRqaEaRMEK6AbpAnxXyowRxQZhJWAo7cKEFbhBoATgFzhhZkYHKwQ-C5BD2g7IOKBPRGEBhJnYKSATBJhc9cF8JqfIQFeBqWBs8tUYybGW0pApzJTqLu1qcEekqRC78GwfbEmwT4AbIiWwyMvH8hitXcKIgI5+stpAgwPFAEIH5QYlvZZdQL8Q48ON8JQIODXwXfF3wZ+DGODRkfwRQRS7vY5qsoBDBsiBC2mOBDTEmGpoISyA-ALBDVLEKA6XnW0p7OdA-warhc2iU4+kMnckRMwgm7hnc2eFndU6AG8nsEG9fOOn437u3Q6XhT0LIhxCECPS90-PXcU7kxCD7i3dsAC8gXKOmU-8uhCZ4CtxmKlmghIVxDtnDQ4CiH-d7xsRBuoohDEcoxwyMnFxVIdP5lXqG9EHhEgkbPCgJwZpBvoCn8ZQJ2CfAMGCd2MGc6nDBQIAMjYruNXwuJMaAasInxZ0DXZzonpDsMshCvpi6J+If+E3APUBkbF1hE+EEIo-rS9qIXndg3qWVK7glDA3iZDkoXXdrIA3cJIc3dHUK3cUcg5CnIdl50yuFCIIho8UkmVDq1DzhHJJVDEobZcuwjVCTQVYgpvFVD+JHuFhdF4k2oUnQecBqkB4H-FRokFCLvHm17OCXd6oSJCUoYJC0oZxCModxCPfPXRsoeJC07nlC1eNl4AoVRD0oarhGoe1B8EKFDAoVGCkIdhxDIZkNFoYxDloSxDx7sYBs7igF5ip3RMobxDcoLdDx2mN40cL9l7fNpFximgRJiplCxIWdDmISjBu0DJDcoORCyOgp4Uzg2dkzk9ClAN5FO0MpQlQBYArwKIBqwLcBV2heBrgM2BgQCGgrBE9DSvMrxYhDgDeXlDN4wIJN9QCUwcYTG0w4MrxndnZUJ6AlJpcLLh5cH14-futDuoYxxdoVBxKKoNCDofpDsODRkXxqdD97itDWITQproesUnobXcHoSzgvocEVcYW9DUoWLCJisEVa7r9DBYRdCgYWRDxobRD3ti2ddnOTDhsJTCC7AiCgpC+AvcPTC5cDmA+vKWAMJLsEIzJzI1ZMZdn2LeD50kW8kjiMDlblDDRsrDC9oEqAAQGsBNgCsAPgLWA0YRjCsYRx09YS9CQ8NGB8YfNd1CrlABYblCLoZfRRYYq9xoRLDVXu3RjIarhy7vLCU4ZtCkoXNCsoQxDVYQDDW7vRCcoedCS4ZdCLMOxCboYrCFivdD04ZWJa4dLD64XNCK7lNCFYS3C7oQXDmACrCE4ZXCS1rzsNoTNCtoRFCWXrAkDlhhkr8tzDgobzDn4nS8tYUtcm4esUlXslD24R9DpocJDa7r3D44RXCpIWC47sEYVWYdhxicOY4BoY2CZ4cND2oChCmPjwVNihWhtivBwxoXnCy7mvCc4a-5V4T3CFoUXD+4fvC6wptUp4ZGDmwTzDwhK6wHISrQQYZBhTuh6CeKGlFjwQjgoZrpCDodo8-XtR8kEcAjZ4SNDtOOAi82sbCEpM05A8GoJ0ER+CUEbTNjOprDm2m7sbfkAiGcM5c9tlpIUpDQi8FDQ1agtJh6UIzJKAdMJf0r9ICJLwMhwS0gJIMrRXQLGCTALKQEwbjQQzkXxwnqqhycJwQ+5NrEyokFDZQZo9tQTQj9IpxlyOKqC6olzCMEZqDRlqoiHIc1FxMqNAwBFG5gyO+Dj-E4pdIE7dQ2tyAkgNkBi9iAMluDzgFoe+D26DgjAHlbh3iCypPKByAZ9g4jupk4iXEUwi44RYjKNDOAHevspfEf2l7EdypAkclBnEW5IQkdqRMweEjlsHSwCwedJYkZz5U7Px50pA5D3EWEjAHukiokZki7EcsYckRj08kVwoCkaEjUkcUizWEg9bEf4i4kVBIQBtUjXEVGDCkfUjMHk6JrEdEiskb5V4kR1BEkfki3EXUibcuEivEcoQfEWUiWkY4iEkcEjakSkjJkYA93wHO5Skc0jYkQsiRkUsjxkSsjaEcUi45DYi-Edsjhkc+49kV0iJkYcjMHiUjZkVsihkW0jkoB0jkkeYiekfQCOoAGwmkacjHkbisLkUkjlkdYgPEb0jFhCcjU7CO5OkRwoIsMCiPkf0JwrPci-kRCjXkTQjLEesjAqN8jwUQCjxkfZCikbcjjkb4jckViirkQcjLEXciMUVUiiUVCiU0DCjsaslAvkWCiKUWMjiUW8jVkZg8WoC0jKkSAN0hjUjsUSijwkRyidkYxxIUdGDrkZYj2UWcinkR1BuUcKjoUbijYUfMjzkdhwZUQYl1RqHJZSJIjRcHYACQGxIWoD4wgnMIJdUe+IgnA5gtmHkATUewB7yNIjW8HqjkypkYbNABgWzoajTUaqgoAh1AnURaiyqFNYOoDaiXUXEBLPkajH4LxhLqAHBDEHQIA0Qtw7USkwqIc6iyArfkHCILQuWBMZ+YEMIA7nO5FgGhUQguwQzEs6jDCDgIcALaUwodIjPvOmho0XmjPvC+4YohqBS0WUJPvLt5JUMQBVqO9JSwGFtqcCfxW0sgD3oJnUjiuEAtWt6QDodGiPUbGjTQD5BbjMcxMwLWBjhuXRU6IYiB0UE5Y0RkJx0XHssynwQp0UTxDEQwDCHuOjAPAAN1vD6jY0QAZYFEDEvcLyUk9hL1F0XFtl0TvYBwHPleWOejJ-pejL5AwBogHwBcweVhRcGdIdUdQ5pCAOCbAFbQAoP7gqGFJog7OOjHypTD4yjCV10aO5ecJui4SNuj3SsMg90SEFM8j5pD0eyVj0QntT0fQMQMcf00cFqVd7GIhu0EiIcMU9h4ymq1n0a+jd3CwwO5vHheHIAQpETZYxQNk1AMSFdsMU+USMQntVvLejMuvei-vBhhCMaD5aYdLRCMaBjcMamVWSpGUyAnCNLSK44jCoRil0byVOMcJjiMZei+MeOiBMfFIhMXejuAZeiU0NKUl0AwDI+JG41-qj9LgW6iKEH95RFN+QUfpx1wEesMIyo14lStfFqVr-FnXHpjfpiAAlhs-F+MRJj8iqui+0c2D7MYqVeAjBjL0S7wLkKIgF0XCRcYYJiRYdOjEIXOMuMROjcoufhjAOt4CkTEBNvOGjVxL+JSQDzghgAwBY4mGiY0UqUecOel9UZjFZ0cmUSsf6ic0WAJKsQtxQYNbhcse1AluBggOvCSi7vDoiPwb3DCMdFiWeDJDYhKk9pgHnsZ0b1iKYWjgJ6CFjAPPPQxsfrCJsSzww+GnwnllRdqzoFioyh6AClIoj+0d5jGvBPQXkCFjQfHPREsepjE6CRkLOnpiUslYI90Y1iNwPUBLsWiMtsQFidsS95ByEDDoGnlUsAjSY+UYA8WoKnYewJSiRUUXgaYM7JQ1NokcLrKQiQDBAVAI8QqbBQgzyG8xMfh1jAHuTgLFDa5bXESpakTij3kbSitaqMsCiNl9sIhjj9kUVxx8Gqi17jzRNUcHU2JELgOZI-AREfGC96GxI+MghCZ4XojT+Loc4sQdDdPCTQONjGCKEFqBIcaqg6cRuA4wWIjGcaNgYjoFcVGJBjBUD6cjjLU8G9rDdTMTThoYfIDYsNaBRcF60dBLpBdCNXhrMWcxbMagskcU3os1EyiqUVjjWUR8jmIIwCeUVciezKoNfIds5WkCmBaZHXhjcbCjNTtltlURbibkR7iXBt7ixfA7i7yrcMTAG6AXyiZBo6AD4SoAoIGzC2czcYDjg5OYBliqLgVfKqgacc4UOXCLjREawhxcaWAf8K6BCRGIIHINMZOEZghRcHwBe0btlIMWRkgzlTQcrjWksRLjZnYKLgSEMJA48NT4XnH5EGQM7B50ic8zgWM8TMdICIwE3j6sO5A28aPh9cdLiLEU8DqPl6hU8b2BpQEfxSNoridbkPiP2nu0sEJiJJ8Zhxp8Ubi8qt9i28AD4lQHB5koKk9D8S15Q0LEIIINb0j8cbRYhCX4b8Rfj1QLEIX3A50j8TFFtPO1jBOkfjn8fWUgENbjDMUZx9oboiN+FqCaDg6cd8VziRJnLjU3OMNWgUrih8WMJm8RQgx8dmIJ8SAdDcaI8JSCGwQLJ2wnhpyxMcF615IGXw4ceLhMfosAzYYzDFcNFh8cLMACEc1wKJDeVSJsaxHsd1iSEqAT9EXZUr9L8QiCb-xtMCRYNSAQSCcEYIK5LBBczJ2wSIpvC1Ib4VaHDzhzIXtB8ELQxriKISjIEIS7YdRQU8W7gi8TYBGEPQTmpB4Vm4YAUJoSq95CSNjEIRBj4sXLwrQPtiLCVASDsiligSpBiKeCRlB4a5QtBMkxycMFhGENZDRiDLB93N+dfDtHt1cGkhm0c+ALwQOCd-Jq5iEeIkWMiojMhpnD84epCQ3nISVkDqBeWh4jInmuA+7OC9DET3w32vjwqRjfNq8TASWSsZjelpc8YriPjRcKgStwQPibMbviI+BKDgCWwSNEv7FqSuY5JCSvDU4clCTCSshHJOkSikW0TyOFkTz7DkTEIZPx8iQATK8fUSoCTXi+9sviSTuUSCXkgTR8bUJ0CTSdMCYxsmidESIYiBcTEek5OibnCR4YkSZCb0S1XsTgBifUi9ie3AdYdgdDEUfxJiZ6ciiZYS5iRxsFiWc8liSt0VidUS1iU85t8RmCbcpSUamtsNO0FbQPKs6pWsHXkYlOEU3KEaRlaKmCJOKsUvIEGwCkcaCbFCVkEia-C5oWcSpoGmxLiasihiXPFAqhASASR+DOQUyUovGUSm9hUSOoN8SUCb8TiQP8TNiX78qmEaR9aA+Y3cC4VvyOb9iLAyBfbowg0ihyAXLHEpVWEQVxBHKw4di2jS8h2kzTiudGZqOkJdFEhxCjpg4lHwoszKBRwKCQAbAPSARgCMBZKufC3wTPDdQRJltODaCH4XaC4-vwj3KGhUHzBQgn0l34fyMdwbMs608ROnjwgPIjWuDQiv+MZk7Mg5DvSU0EDopWwdAGoB0qhKYTisf4L7q2Q4gO-CrHOLDMoWmBk4a-44yQXDeIZVMMiUkdPiJGAVsBawPlKGSkRKkgYIBAwfYX7CA4UHCDgOjDyHKHDrermTkKEaYTitHD07M45FLIRtCBH6SrMtjYbMoUl3wb4knMrZl2BKD0ayQUA6yfbCIySNZoyR3Db-MmSkiR6gEyTXDO4UYS04VpDukQSSMyX04CbDmSQybWS-kBWEiyQjCqwEjCqwCjCyyRWTMYV25BOoOSwyfbCGyTmMEHM2SaTLc5e5MQDgwHEpfiNOkVhJWEQSeqjkwZGsaEdl4RgEtxpgAFIgAA)

```php
<?php

/* PARSER SCRIPT FOR TAGUI FRAMEWORK ~ TEBEL.ORG */

// check flow filename for .tagui or .js or .txt or no extension
$script = $argv[1];
if ($script == "") {
    die("ERROR - specify flow filename as first parameter\n");
}
if (strpos(pathinfo($script, PATHINFO_BASENAME), '.') !== false) {
    if (
        pathinfo($script, PATHINFO_EXTENSION) != "gui" and
        pathinfo($script, PATHINFO_EXTENSION) != "txt" and
        pathinfo($script, PATHINFO_EXTENSION) != "js" and
        pathinfo($script, PATHINFO_EXTENSION) != "tagui"
    ) {
        // check if file has extension
        die("ERROR - use .tagui .js .txt or no extension for flow filename\n");
    }
}

// make sure required files are available and can be opened
if (!file_exists($script)) {
    die("ERROR - cannot find " . $script . "\n");
}
($input_file = fopen($script, 'r')) or
    die("ERROR - cannot open " . $script . "\n");
($output_file = fopen($script . '.js', 'w')) or
    die("ERROR - cannot open " . $script . '.js' . "\n");
($config_file = fopen('tagui_config.txt', 'r')) or
    die("ERROR - cannot open tagui_config.txt" . "\n");
($header_file = fopen('tagui_header.js', 'r')) or
    die("ERROR - cannot open tagui_header.js" . "\n");
($footer_file = fopen('tagui_footer.js', 'r')) or
    die("ERROR - cannot open tagui_footer.js" . "\n");

$repo_count = 0;
if (file_exists(getenv('custom_csv_file'))) {
    // load datatable or legacy datatable / repository
    ($repo_file = fopen(getenv('custom_csv_file'), 'r')) or
        die("ERROR - cannot open " . getenv('custom_csv_file') . "\n");
    while (!feof($repo_file)) {
        $repo_data[$repo_count] = fgetcsv($repo_file);
        if (count($repo_data[$repo_count]) == 0) {
            die(
                "ERROR - empty row found in " . getenv('custom_csv_file') . "\n"
            );
        }
        $repo_count++;
    }
    fclose($repo_file);
    $repo_count -= 1; //-1 for header, for EOF need to check flexibly using below line
    if (count($repo_data[$repo_count]) == 1) {
        $repo_count -= 1;
    }
} //-1 for EOF (Windows files don't end with newline character)

$local_repo_location =
    str_replace("\\", "/", dirname($script)) . '/tagui_local.csv';
if (file_exists($local_repo_location)) {
    // load local repository file if it exists for objects and keywords
    ($local_repo_file = fopen($local_repo_location, 'r')) or
        die("ERROR - cannot open " . 'tagui_local.csv' . "\n");
    if ($repo_count != 0) {
        $repo_count++;
    }
    fgetcsv($local_repo_file); // +1 if array has data, discard header record
    while (!feof($local_repo_file)) {
        $repo_data[$repo_count] = fgetcsv($local_repo_file);
        if (count($repo_data[$repo_count]) == 0) {
            die("ERROR - empty row found in " . 'tagui_local.csv' . "\n");
        }
        if (count($repo_data[$repo_count]) != 1) {
            // pad the empty columns when local repository is used with datatable
            $repo_data[$repo_count] = array_pad(
                $repo_data[$repo_count],
                count($repo_data[0]),
                $repo_data[$repo_count][1]
            );
        }
        $repo_count++;
    }
    fclose($local_repo_file);
    $repo_count -= 1;
    if (count($repo_data[$repo_count]) == 1) {
        $repo_count -= 1;
    }
}

if (file_exists('tagui_global.csv')) {
    // load global repository file if it exists for objects and keywords
    ($global_repo_file = fopen('tagui_global.csv', 'r')) or
        die("ERROR - cannot open " . 'tagui_global.csv' . "\n");
    if ($repo_count != 0) {
        $repo_count++;
    }
    fgetcsv($global_repo_file); // +1 if array has data, discard header record
    while (!feof($global_repo_file)) {
        $repo_data[$repo_count] = fgetcsv($global_repo_file);
        if (count($repo_data[$repo_count]) == 0) {
            die("ERROR - empty row found in " . 'tagui_global.csv' . "\n");
        }
        if (count($repo_data[$repo_count]) != 1) {
            // pad the empty columns when global repository is used with datatable
            $repo_data[$repo_count] = array_pad(
                $repo_data[$repo_count],
                count($repo_data[0]),
                $repo_data[$repo_count][1]
            );
        }
        $repo_count++;
    }
    fclose($global_repo_file);
    $repo_count -= 1;
    if (count($repo_data[$repo_count]) == 1) {
        $repo_count -= 1;
    }
}

$tagui_web_browser = "this"; // set the web browser to be used base on tagui_web_browser environment variable
if (
    getenv('tagui_web_browser') == 'headless' or
    getenv('tagui_web_browser') == 'chrome'
) {
    $tagui_web_browser = 'chrome';
}

$inside_code_block = 0; // track if step or code is inside user-defined code block
$inside_while_loop = 0; // track if step is in while loop and avoid async wait
$for_loop_tracker = ""; // track for loop to implement IIFE pattern
$code_block_tracker = ""; // track code blocks defined in flow
$integration_block_body = ""; // track body of integration block
$line_number = 0; // track flow line number for error message
$real_line_number = 0; // line number excluding comments and blank lines
$test_automation = 0; // to determine casperjs script structure
$url_provided = false; // to detect if url is provided in user-script

// track begin-finish blocks for integrations eg - py, r, run, vision, js, dom
$inside_py_block = 0;
$inside_r_block = 0;
$inside_run_block = 0;
$inside_vision_block = 0;
$inside_js_block = 0;
$inside_dom_block = 0;

// series of loops to create casperjs script from header, user flow, footer files

// create header of casperjs script using tagui config and header template
fwrite(
    $output_file,
    "/* OUTPUT CASPERJS SCRIPT FOR TAGUI FRAMEWORK ~ TEBEL.ORG */\n\n"
);
fwrite($output_file, "var casper = require('casper').create();\n"); // opening lines
while (!feof($config_file)) {
    fwrite($output_file, fgets($config_file));
}
fclose($config_file);
while (!feof($header_file)) {
    fwrite($output_file, fgets($header_file));
}
fclose($header_file);

// append global functions file created by user if the file exists
if (file_exists('tagui_global.js')) {
    ($global_functions_file = fopen('tagui_global.js', 'r')) or
        die("ERROR - cannot open tagui_global.js" . "\n");
    while (!feof($global_functions_file)) {
        fwrite($output_file, fgets($global_functions_file));
    }
    fwrite($output_file, "\n");
    fclose($global_functions_file);
}

// append local functions file created by user if the file exists
$local_functions_location =
    str_replace("\\", "/", dirname($script)) . '/tagui_local.js';
if (file_exists($local_functions_location)) {
    ($local_functions_file = fopen($local_functions_location, 'r')) or
        die("ERROR - cannot open tagui_local.js" . "\n");
    while (!feof($local_functions_file)) {
        fwrite($output_file, fgets($local_functions_file));
    }
    fwrite($output_file, "\n");
    fclose($local_functions_file);
}

// append comment on flow path variable in casperjs script
fwrite($output_file, "// flow path for save_text and snap_image\n");

// save flow path in casperjs script to be used by save_text and snap_image
// casperjs/phantomjs do not seem to support \ for windows paths, replace with / to work
// below marker for appending url_intent when flow file does not start with comments or url
$marker_for_opening_url =
    "var flow_path = '" . str_replace("\\", "/", dirname($script)) . "';\n\n";
fwrite($output_file, $marker_for_opening_url);

// section to handle calling of other TagUI automation scripts for reusability
($temp_output_file = fopen($script . '.raw', 'w')) or
    die("ERROR - cannot open " . $script . '.raw' . "\n");
while (!feof($input_file)) {
    fwrite($temp_output_file, expand_intent(fgets($input_file)));
}
fclose($input_file);
fclose($temp_output_file); // generate temp output file of expanded intents (if any) before reopening as input
($input_file = fopen($script . '.raw', 'r')) or
    die("ERROR - cannot open " . $script . '.raw' . "\n");

if (
    strpos(
        strtolower(file_get_contents('tagui_config.txt')),
        "var tagui_language = 'english';"
    ) == false
) {
    // section which includes translation engine for handling flows in other languages
    $temp_argv1 = $argv[1];
    $temp_argv2 = $argv[2];
    $temp_argv3 = $argv[3];
    $argv[1] = 'tagui_parse.php';
    $argv[2] = 'from';
    $temp_tagui_config = strtolower(file_get_contents('tagui_config.txt'));
    $temp_tagui_config_start = strpos($temp_tagui_config, 'var tagui_language');
    $temp_tagui_config_end = strpos(
        $temp_tagui_config,
        "\n",
        $temp_tagui_config_start
    );
    $temp_tagui_config = substr(
        $temp_tagui_config,
        $temp_tagui_config_start,
        $temp_tagui_config_end - $temp_tagui_config_start
    );
    $temp_tagui_config = str_replace(
        'var tagui_language',
        '',
        $temp_tagui_config
    );
    $temp_tagui_config = str_replace('"', '', $temp_tagui_config);
    $temp_tagui_config = str_replace("'", '', $temp_tagui_config);
    $temp_tagui_config = str_replace('=', '', $temp_tagui_config);
    $temp_tagui_config = str_replace(';', '', $temp_tagui_config);
    $argv[3] = trim($temp_tagui_config);
    require 'translate.php'; // set parameters to load translation engine
    $argv[1] = $temp_argv1;
    $argv[2] = $temp_argv2;
    $argv[3] = $temp_argv3;
    $translated_raw_flow = "";
    while (!feof($input_file)) {
        $translated_raw_flow .= translate_intent(fgets($input_file));
    }
    fclose($input_file);
    file_put_contents($script . '.raw', $translated_raw_flow); // save translated output before reopening as input
    ($input_file = fopen($script . '.raw', 'r')) or
        die("ERROR - cannot open " . $script . '.raw' . "\n");
}

// section to do required pre-processing on expanded .raw flow file
$padded_raw_flow = "";
$previous_line_is_condition = false;
$reference_indentation = "";
while (!feof($input_file)) {
    $padded_raw_flow_line = fgets($input_file);
    $indentation_tracker = str_replace(
        ltrim($padded_raw_flow_line),
        '',
        $padded_raw_flow_line
    );
    $indentation_tracker = substr(
        $indentation_tracker,
        strlen($reference_indentation)
    );
    // above line handles py and vision blocks that begin indented (eg in if or loops)
    $padded_raw_flow_line = ltrim($padded_raw_flow_line);

    // track whether line is inside integrations begin-finish code blocks
    if (strtolower(trim($padded_raw_flow_line)) == "js begin") {
        $inside_js_block = 1;
    } elseif (strtolower(trim($padded_raw_flow_line)) == "js finish") {
        $inside_js_block = 0;
    } elseif (strtolower(trim($padded_raw_flow_line)) == "py begin") {
        $inside_py_block = 1;
        $reference_indentation = $indentation_tracker;
    } elseif (strtolower(trim($padded_raw_flow_line)) == "py finish") {
        $inside_py_block = 0;
        $reference_indentation = "";
    }
    // reset reference indentation
    elseif (strtolower(trim($padded_raw_flow_line)) == "r begin") {
        $inside_r_block = 1;
    } elseif (strtolower(trim($padded_raw_flow_line)) == "r finish") {
        $inside_r_block = 0;
    } elseif (strtolower(trim($padded_raw_flow_line)) == "dom begin") {
        $inside_dom_block = 1;
    } elseif (strtolower(trim($padded_raw_flow_line)) == "dom finish") {
        $inside_dom_block = 0;
    } elseif (strtolower(trim($padded_raw_flow_line)) == "run begin") {
        $inside_run_block = 1;
    } elseif (strtolower(trim($padded_raw_flow_line)) == "run finish") {
        $inside_run_block = 0;
    } elseif (strtolower(trim($padded_raw_flow_line)) == "vision begin") {
        $inside_vision_block = 1;
        $reference_indentation = $indentation_tracker;
    } elseif (strtolower(trim($padded_raw_flow_line)) == "vision finish") {
        $inside_vision_block = 0;
        $reference_indentation = "";
    } // reset reference indentation

    // auto-padding not relevant in integrations code blocks
    if (
        $inside_js_block +
            $inside_py_block +
            $inside_r_block +
            $inside_dom_block +
            $inside_run_block +
            $inside_vision_block >
        0
    ) {
        $padded_raw_flow .= $indentation_tracker . $padded_raw_flow_line;
        continue;
    }

    // rewrite JS function definitions to work in scope within CasperJS blocks
    if (
        substr($padded_raw_flow_line, 0, 9) == "function " or
        substr($padded_raw_flow_line, 0, 12) == "js function "
    ) {
        if (strpos($padded_raw_flow_line, "(") !== false) {
            $js_function_name_startpos =
                strpos($padded_raw_flow_line, "function ") + 9;
            $js_function_name_endpos = strpos(
                $padded_raw_flow_line,
                "(",
                $js_function_name_startpos
            );
            $padded_raw_flow_line =
                trim(
                    substr(
                        $padded_raw_flow_line,
                        $js_function_name_startpos,
                        $js_function_name_endpos - $js_function_name_startpos
                    )
                ) .
                ' = function ' .
                trim(substr($padded_raw_flow_line, $js_function_name_endpos)) .
                "\n";
        } else {
            die("ERROR - missing brackets () for " . $padded_raw_flow_line);
        }
    }
    // pad { and } blocks for conditions, to keep JavaScript syntax correct
    if (
        substr($padded_raw_flow_line, 0, 3) == "if " or
        substr($padded_raw_flow_line, 0, 8) == "else if " or
        substr($padded_raw_flow_line, 0, 4) == "for " or
        substr($padded_raw_flow_line, 0, 6) == "while " or
        substr($padded_raw_flow_line, 0, 6) == "popup " or
        substr($padded_raw_flow_line, 0, 6) == "frame " or
        trim($padded_raw_flow_line) == "else"
    ) {
        $current_line_is_condition = true;
    } else {
        $current_line_is_condition = false;
    }
    if (
        $previous_line_is_condition == true and
        $current_line_is_condition == true
    ) {
        die(
            "ERROR - for nested conditions, loops, popup, frame, set { and } explicitly\n" .
                "ERROR - add { before this line and add } accordingly - " .
                $padded_raw_flow_line
        );
    }
    if (
        $previous_line_is_condition == true and
        substr($padded_raw_flow_line, 0, 1) != "{"
    ) {
        $padded_raw_flow .= "{\n" . trim($padded_raw_flow_line) . "\n}\n";
    } else {
        $padded_raw_flow .= $padded_raw_flow_line;
    }
    $previous_line_is_condition = $current_line_is_condition; // prepare for next line
}
fclose($input_file);
file_put_contents($script . '.raw', $padded_raw_flow);
// generate temp output file with padded { and } (if any) before reopening as input
($input_file = fopen($script . '.raw', 'r')) or
    die("ERROR - cannot open " . $script . '.raw' . "\n");
// re-initialize trackers for begin-finish blocks of integrations
$inside_py_block = 0;
$inside_r_block = 0;
$inside_run_block = 0;
$inside_vision_block = 0;
$inside_js_block = 0;
$inside_dom_block = 0;

// main loop to parse intents in flow file for conversion into javascript code
while (!feof($input_file)) {
    fwrite($output_file, parse_intent(fgets($input_file)));
}
fclose($input_file);

// create footer of casperjs script using footer template and do post-processing
while (!feof($footer_file)) {
    fwrite($output_file, fgets($footer_file));
}
fclose($footer_file);
fclose($output_file);
chmod($script . '.js', 0600); // append url opening block below instead of throwing error
if (!$url_provided) {
    // echo "ERROR - first line of " . $script . " not URL or comments\n";
    $GLOBALS['real_line_number'] = 1;
    $generated_js_file_contents = file_get_contents($script . '.js');
    $generated_js_file_contents = str_replace(
        $marker_for_opening_url,
        $marker_for_opening_url . url_intent('about:blank'),
        $generated_js_file_contents
    );
    file_put_contents($script . '.js', $generated_js_file_contents);
}
if ($inside_code_block != 0) {
    echo "ERROR - number of step { does not tally with with }\n";
}

// post-processing to clean up artifacts from translating human language to JavaScript
$script_content = file_get_contents($script . '.js');
$script_content = str_replace(
    "});\n\ncasper.then(function() {else\n",
    "\nelse\n\n",
    $script_content
);
$script_content = str_replace(
    "});\n\ncasper.then(function() {else if ",
    "\nelse if ",
    $script_content
);
$script_content = str_replace(
    "}); // end of JS code\n\ncasper.then(function() { // start of JS code\n",
    "",
    $script_content
); // above collapse separate js step CasperJS blocks into one continuous block
$script_content = preg_replace(
    '/^casper\.then\(function\(\) {{(.*) \/\/ beg_tx while loop marker/m',
    '$1',
    $script_content
); // above regular expression replace lines having beg_tx while loop markers
$script_content = preg_replace(
    '/^casper\.then\(function\(\) {(.*) \/\/ end_fi while loop marker(.*)}\);/m',
    '$1$2',
    $script_content
); // above regular expression replace lines having end_fi while loop markers
$script_content = preg_replace(
    '/^casper\.then\(function\(\) {(.*)\n(.*) \/\/ end_fi while loop marker(.*)}\);/m',
    "$1\n$2$3",
    $script_content
); // above regular expression replace lines having end_fi while loop markers
file_put_contents($script . '.js', $script_content);

// special handling if chrome or headless chrome is used as browser for automation
// replacement of this.method already happens in step intents, this is mostly to handle user inserted casperjs code
if ($tagui_web_browser == 'chrome') {
    $script_content = file_get_contents($script . '.js'); // read generated script
    $script_content = str_replace(
        "var chrome_id = 0;",
        "var chrome_id = 1;",
        $script_content
    ); // websocket message id
    $script_content = str_replace(
        "casper.exists",
        "chrome.exists",
        $script_content
    ); // change locator check to chrome
    $script_content = str_replace(
        "this.exists",
        "chrome.exists",
        $script_content
    ); // change this.exists call as well
    $script_content = str_replace(
        "casper.click",
        "chrome.click",
        $script_content
    ); // change click method to chrome
    $script_content = str_replace(
        "this.click",
        "chrome.click",
        $script_content
    ); // change this.click call as well
    $script_content = str_replace(
        "casper.mouse",
        "chrome.mouse",
        $script_content
    ); // change mouse object to chrome
    $script_content = str_replace(
        "this.mouse",
        "chrome.mouse",
        $script_content
    ); // change this.mouse call as well
    $script_content = str_replace(
        "casper.sendKeys",
        "chrome.sendKeys",
        $script_content
    ); // change sendKeys method to chrome
    $script_content = str_replace(
        "this.sendKeys",
        "chrome.sendKeys",
        $script_content
    ); // change this.sendKeys call as well
    // for selectOptionByValue check for '(' in order to only overwrite calls and not the custom defined function
    $script_content = str_replace(
        "casper.selectOptionByValue(",
        "chrome.selectOptionByValue(",
        $script_content
    ); // select
    $script_content = str_replace(
        "this.selectOptionByValue(",
        "chrome.selectOptionByValue(",
        $script_content
    ); // select
    // for countElements check for '(' in order to only overwrite calls and not the custom function casper.countElements()
    $script_content = str_replace(
        "casper.countElements(",
        "chrome.countElements(",
        $script_content
    ); // count elements
    $script_content = str_replace(
        "this.countElements(",
        "chrome.countElements(",
        $script_content
    ); // count elements
    // for elementVisible check for '(' in order to only overwrite calls and not the custom function casper.elementVisible()
    $script_content = str_replace(
        "casper.elementVisible(",
        "chrome.elementVisible(",
        $script_content
    ); // check element visible
    $script_content = str_replace(
        "this.elementVisible(",
        "chrome.elementVisible(",
        $script_content
    ); // check element visible
    $script_content = str_replace(
        "casper.fetchText",
        "chrome.fetchText",
        $script_content
    ); // change fetchText method to chrome
    $script_content = str_replace(
        "this.fetchText",
        "chrome.fetchText",
        $script_content
    ); // change this.fetchText call as well
    $script_content = str_replace(
        "casper.capture",
        "chrome.capture",
        $script_content
    ); // change capture method to chrome
    $script_content = str_replace(
        "this.capture",
        "chrome.capture",
        $script_content
    ); // change this.capture call as well
    $script_content = str_replace(
        "casper.captureSelector",
        "chrome.captureSelector",
        $script_content
    ); // capture selector
    $script_content = str_replace(
        "this.captureSelector",
        "chrome.captureSelector",
        $script_content
    ); // capture selector
    $script_content = str_replace(
        "chrome.page.uploadFile",
        "chrome.upload",
        $script_content
    ); // change upload method to chrome
    $script_content = str_replace(
        "casper.page.uploadFile",
        "chrome.upload",
        $script_content
    ); // change upload method to chrome
    $script_content = str_replace(
        "this.page.uploadFile",
        "chrome.upload",
        $script_content
    ); // change this.upload call as well
    $script_content = str_replace(
        "casper.download",
        "chrome.download",
        $script_content
    ); // change download method to chrome
    $script_content = str_replace(
        "this.download",
        "chrome.download",
        $script_content
    ); // change this.download call as well
    $script_content = str_replace(
        "casper.evaluate",
        "chrome.evaluate",
        $script_content
    ); // change evaluate method to chrome
    $script_content = str_replace(
        "this.evaluate",
        "chrome.evaluate",
        $script_content
    ); // change this.evaluate call as well
    $script_content = str_replace(
        "casper.withFrame",
        "chrome.withFrame",
        $script_content
    ); // change withFrame method to chrome
    $script_content = str_replace(
        "this.withFrame",
        "chrome.withFrame",
        $script_content
    ); // change this.withFrame call as well
    $script_content = str_replace(
        "casper.waitForPopup",
        "chrome.waitForPopup",
        $script_content
    ); // change waitForPopup method
    $script_content = str_replace(
        "this.waitForPopup",
        "chrome.waitForPopup",
        $script_content
    ); // change this.waitForPopup call
    $script_content = str_replace(
        "casper.withPopup",
        "chrome.withPopup",
        $script_content
    ); // change withPopup method to chrome
    $script_content = str_replace(
        "this.withPopup",
        "chrome.withPopup",
        $script_content
    ); // change this.withPopup call as well
    $script_content = str_replace(
        "casper.getHTML",
        "chrome.getHTML",
        $script_content
    ); // change getHTML method to chrome
    $script_content = str_replace(
        "this.getHTML",
        "chrome.getHTML",
        $script_content
    ); // change this.getHTML call as well
    $script_content = str_replace(
        "casper.getTitle",
        "chrome.getTitle",
        $script_content
    ); // change getTitle method to chrome
    $script_content = str_replace(
        "this.getTitle",
        "chrome.getTitle",
        $script_content
    ); // change this.getTitle call as well
    $script_content = str_replace(
        "casper.getCurrentUrl",
        "chrome.getCurrentUrl",
        $script_content
    ); // get current url
    $script_content = str_replace(
        "this.getCurrentUrl",
        "chrome.getCurrentUrl",
        $script_content
    ); // get current url
    $script_content = str_replace(
        "casper.debugHTML",
        "chrome.debugHTML",
        $script_content
    ); // change debugHTML method to chrome
    $script_content = str_replace(
        "this.debugHTML",
        "chrome.debugHTML",
        $script_content
    ); // change this.debugHTML call as well
    $script_content = str_replace(
        "casper.reload",
        "chrome.reload",
        $script_content
    ); // change reload method to chrome
    $script_content = str_replace(
        "this.reload",
        "chrome.reload",
        $script_content
    ); // change this.reload call as well
    $script_content = str_replace(
        "casper.back",
        "chrome.back",
        $script_content
    ); // change back method to chrome
    $script_content = str_replace("this.back", "chrome.back", $script_content); // change this.back call as well
    $script_content = str_replace(
        "casper.forward",
        "chrome.forward",
        $script_content
    ); // change forward method to chrome
    $script_content = str_replace(
        "this.forward",
        "chrome.forward",
        $script_content
    ); // change this.forward call as well
    file_put_contents($script . '.js', $script_content); // below initialise chrome integration files
    if (!touch('tagui_chrome.in')) {
        die("ERROR - cannot initialise tagui_chrome.in\n");
    }
    if (!touch('tagui_chrome.out')) {
        die("ERROR - cannot initialise tagui_chrome.out\n");
    }
}

// if mouse_xy(), mouse_x(), mouse_y() helper functions are used, invoke sikuli visual automation
if (
    strpos($script_content, 'mouse_xy()') !== false or
    strpos($script_content, 'mouse_x()') !== false or
    strpos($script_content, 'mouse_y()') !== false
) {
    if (!touch('tagui.sikuli/tagui_sikuli.in')) {
        die("ERROR - cannot initialise tagui_sikuli.in\n");
    }
    if (!touch('tagui.sikuli/tagui_sikuli.out')) {
        die("ERROR - cannot initialise tagui_sikuli.out\n");
    }
}

// check quiet parameter to run flow quietly by only showing explicit output
if (getenv('tagui_quiet_mode') == 'true') {
    $script_content = file_get_contents($script . '.js'); // read generated script
    $script_content = str_replace(
        "var quiet_mode = false;",
        "var quiet_mode = true;",
        $script_content
    ); // set quiet_mode
    $script_content = str_replace(
        "casper.echo('\\nSTART - automation started - ",
        "dummy_echo('",
        $script_content
    );
    file_put_contents($script . '.js', $script_content);
}

// convert casperjs script into test script structure if test option is used
if (getenv('tagui_test_mode') == 'true') {
    $script_content = file_get_contents($script . '.js'); // read generated script
    $script_content = str_replace(
        "casper.echo('\\nSTART - automation started - ",
        "casper.echo('",
        $script_content
    ); // date
    $script_content = str_replace(
        "techo('FINISH - automation",
        "dummy_echo('FINISH - test",
        $script_content
    ); // silent
    $script_content = str_replace(
        "this.echo(",
        "test.comment(",
        $script_content
    ); // change echo to test comment
    $script_content = str_replace(
        "test.comment('ERROR",
        "test.fail('ERROR",
        $script_content
    ); // error comment to fail
    // change echo to test comment in techo to show output correctly as test comments
    $script_content = str_replace(
        "casper.echo(echo_string);",
        "casper.test.comment(echo_string);",
        $script_content
    );
    $script_content = str_replace(
        "casper.echo(translated_string);",
        "casper.test.comment(translated_string);",
        $script_content
    );
    $script_content = str_replace(
        "\\n'",
        "'",
        str_replace("'\\n", "'", $script_content)
    ); // compact test output
    // casperjs testing does not allow creation of casper object as it is already created by test engine
    $script_content = str_replace(
        "var casper = require(",
        "// var casper = require(",
        $script_content
    );
    // following help to define the script structure required by casperjs for test automation purpose
    $script_content = str_replace(
        "casper.start(",
        "casper.test.begin('" .
            str_replace("\\", "\\\\", $script) .
            "', " .
            $test_automation .
            ", function(test) {\ncasper.start(",
        $script_content
    ); // define required casperjs test structure
    $script_content = str_replace(
        "casper.run();",
        "casper.run(function() {test.done();});});",
        $script_content
    );
    file_put_contents($script . '.js', $script_content);
}

// save script after restructuring for testing
// otherwise prep for normal execution by commenting out test assertions as they will kill the script
elseif ($test_automation > 0) {
    $script_content = file_get_contents($script . '.js'); // read generated script
    $script_content = str_replace("test.", "// test.", $script_content);
    file_put_contents($script . '.js', $script_content);
}

function expand_intent($script_line)
{
    // function to handle calling of other TagUI automation scripts for reusability
    if (
        strpos(strtolower(trim($script_line)), 'tagui ') === 0 or
        strtolower(trim($script_line)) == 'tagui'
    ) {
        $params = trim(
            substr(
                trim($script_line) . " ",
                1 + strpos(trim($script_line) . " ", " ")
            )
        );
        if ($params == "") {
            die(
                "ERROR - filename missing for step " . trim($script_line) . "\n"
            );
        } elseif (!file_exists(abs_file($params))) {
            die("ERROR - file not found for step " . trim($script_line) . "\n");
        } else {
            $expanded_intent = "";
            $temp_input_file = fopen(abs_file($params), 'r');
            if ($temp_input_file == false) {
                die(
                    "ERROR - cannot open file for step " .
                        trim($script_line) .
                        "\n"
                );
            }
            while (!feof($temp_input_file)) {
                $expanded_intent .= expand_intent(fgets($temp_input_file));
            }
            fclose($temp_input_file);
            return $expanded_intent;
        }
    } else {
        return rtrim($script_line) . "\n";
    }
}

function current_line()
{
    return "[LINE " . $GLOBALS['line_number'] . "]";
}

function parse_intent($script_line)
{
    $GLOBALS['line_number']++;
    $GLOBALS['real_line_number']++;
    $indentation_tracker = str_replace(ltrim($script_line), '', $script_line); // tracking for py and vision
    $script_line = trim($script_line);
    if ($script_line == "") {
        $GLOBALS['real_line_number']--;
        return "";
    }
    $script_line = parse_backticks($script_line); // below check again after replacing repository definitions
    $script_line = trim($script_line);
    if ($script_line == "") {
        $GLOBALS['real_line_number']--;
        return "";
    }
    // below use buffer to handle integration code blocks if inside integration code block
    $intent_type = get_intent($script_line);
    if ($intent_type == "integration_block") {
        $GLOBALS['integration_block_body'] .=
            $indentation_tracker . $script_line . "[END_OF_LINE]";
        return "";
    } else {
        $script_line = parse_closure($script_line);
        return process_intent($intent_type, $script_line);
    }
}

function parse_backticks($script_line)
{
    // check existence of objects or keywords by searching for `object or keyword name`, then expand from repository
    // check for even number of ` to reduce false-positive because backtick syntax is supposed to be matching pairs
    if (
        substr_count($script_line, '`') > 1 and
        !(substr_count($script_line, '`') & 1)
    ) {
        if ($GLOBALS['repo_count'] == 0) {
            $script_line = parse_variables($script_line);
        } else {
            if (getenv('tagui_data_set') !== false) {
                $data_set = intval(getenv('tagui_data_set'));
            } else {
                $data_set = 1;
            }
            $escaped_line_ends = ["\n" => "\\n", "\r" => "\\r"];
            // loop through repository data to search and replace definitions, do it twice to handle objects within keywords
            for (
                $repo_check = 0;
                $repo_check <= $GLOBALS['repo_count'];
                $repo_check++
            ) {
                $repo_keyword =
                    "`" . $GLOBALS['repo_data'][$repo_check][0] . "`";
                $repo_data_value = strtr(
                    $GLOBALS['repo_data'][$repo_check][$data_set],
                    $escaped_line_ends
                );
                $script_line = str_replace(
                    $repo_keyword,
                    $repo_data_value,
                    $script_line
                );
            }
            for (
                $repo_check = 0;
                $repo_check <= $GLOBALS['repo_count'];
                $repo_check++
            ) {
                $repo_keyword =
                    "`" . $GLOBALS['repo_data'][$repo_check][0] . "`";
                $repo_data_value = strtr(
                    $GLOBALS['repo_data'][$repo_check][$data_set],
                    $escaped_line_ends
                );
                $script_line = str_replace(
                    $repo_keyword,
                    $repo_data_value,
                    $script_line
                );
            }
            if (strpos($script_line, '`') !== false) {
                $script_line = parse_variables($script_line);
            }
        }
    }
    return $script_line;
}

function parse_variables($script_line)
{
    // `variable` --> '+variable+'
    $quote_token = "'+"; // token to alternate replacements for '+variable+'
    for (
        $char_counter = 0;
        $char_counter < strlen($script_line);
        $char_counter++
    ) {
        if (substr($script_line, $char_counter, 1) == "`") {
            $script_line = substr_replace(
                $script_line,
                $quote_token,
                $char_counter,
                1
            );
            if ($quote_token == "'+") {
                $quote_token = "+'";
            } else {
                $quote_token = "'+";
            }
        }
    }
    return $script_line;
}

function parse_closure($script_line)
{
    switch ($script_line) {
        // \\n is needed for py, r, vision as multi-line string needs to have \n escaped to work in javascript
        // replacement code for [END_OF_LINE] custom token to denote line break is done at py, r, vision intents
        case "py finish":
            $script_line = substr($GLOBALS['integration_block_body'], 0, -13);
            $GLOBALS['inside_py_block'] = 0;
            break;
        case "r finish":
            $script_line = substr($GLOBALS['integration_block_body'], 0, -13);
            $GLOBALS['inside_r_block'] = 0;
            $script_line = str_replace(
                ";; ",
                "; ",
                str_replace(
                    "[END_OF_LINE]",
                    "; ",
                    $GLOBALS['integration_block_body']
                )
            );
            break;
        case "vision finish":
            $script_line = substr($GLOBALS['integration_block_body'], 0, -13);
            $GLOBALS['inside_vision_block'] = 0;
            break;
        case "js finish":
            $script_line = str_replace(
                "[END_OF_LINE]",
                "\n",
                $GLOBALS['integration_block_body']
            );
            $GLOBALS['inside_js_block'] = 0;
            break;
        case "dom finish":
            $script_line = str_replace(
                "[END_OF_LINE]",
                "\n",
                $GLOBALS['integration_block_body']
            );
            $GLOBALS['inside_dom_block'] = 0;
            break;
    }
    return $script_line;
}

function process_intent($intent_type, $script_line)
{
    // check intent of step for interpretation into casperjs code
    switch ($intent_type) {
        case "url":
            return url_intent($script_line);
            break;
        case "tap":
            return tap_intent($script_line);
            break;
        case "rtap":
            return rtap_intent($script_line);
            break;
        case "dtap":
            return dtap_intent($script_line);
            break;
        case "hover":
            return hover_intent($script_line);
            break;
        case "type":
            return type_intent($script_line);
            break;
        case "select":
            return select_intent($script_line);
            break;
        case "read":
            return read_intent($script_line);
            break;
        case "show":
            return show_intent($script_line);
            break;
        case "upload":
            return upload_intent($script_line);
            break;
        case "down":
            return down_intent($script_line);
            break;
        case "receive":
            return receive_intent($script_line);
            break;
        case "echo":
            return echo_intent($script_line);
            break;
        case "save":
            return save_intent($script_line);
            break;
        case "dump":
            return dump_intent($script_line);
            break;
        case "write":
            return write_intent($script_line);
            break;
        case "load":
            return load_intent($script_line);
            break;
        case "snap":
            return snap_intent($script_line);
            break;
        case "table":
            return table_intent($script_line);
            break;
        case "wait":
            return wait_intent($script_line);
            break;
        case "live":
            return live_intent($script_line);
            break;
        case "ask":
            return ask_intent($script_line);
            break;
        case "keyboard":
            return keyboard_intent($script_line);
            break;
        case "mouse":
            return mouse_intent($script_line);
            break;
        case "check":
            return check_intent($script_line);
            break;
        case "test":
            return test_intent($script_line);
            break;
        case "frame":
            return frame_intent($script_line);
            break;
        case "popup":
            return popup_intent($script_line);
            break;
        case "api":
            return api_intent($script_line);
            break;
        case "run":
            return run_intent($script_line);
            break;
        case "dom":
            return dom_intent($script_line);
            break;
        case "js":
            return js_intent($script_line);
            break;
        case "r":
            return r_intent($script_line);
            break;
        case "py":
            return py_intent($script_line);
            break;
        case "vision":
            return vision_intent($script_line);
            break;
        case "timeout":
            return timeout_intent($script_line);
            break;
        case "code":
            return code_intent($script_line);
            break;
        default:
            echo "ERROR - " .
                current_line() .
                " cannot understand step " .
                $script_line .
                "\n";
    }
}

function get_intent($raw_intent)
{
    $lc_raw_intent = strtolower($raw_intent);
    //check for a finish command and return, so we don't accidentally count it as a block intent
    if ($lc_raw_intent == "py finish") {
        return "py";
    }
    if ($lc_raw_intent == "r finish") {
        return "r";
    }
    if ($lc_raw_intent == "vision finish") {
        return "vision";
    }
    if ($lc_raw_intent == "js finish") {
        return "js";
    }
    if ($lc_raw_intent == "dom finish") {
        return "dom";
    }

    if (
        $GLOBALS['inside_py_block'] != 0 ||
        $GLOBALS['inside_r_block'] != 0 ||
        $GLOBALS['inside_vision_block'] != 0 ||
        $GLOBALS['inside_js_block'] != 0 ||
        $GLOBALS['inside_dom_block'] != 0
    ) {
        return "integration_block";
    }
    if ($GLOBALS['inside_run_block'] != 0) {
        return "run";
    }

    if (
        substr($lc_raw_intent, 0, 7) == "http://" or
        substr($lc_raw_intent, 0, 8) == "https://" or
        substr($lc_raw_intent, 0, 11) == "about:blank"
    ) {
        return "url";
    } // recognizing about:blank as valid URL as it is part of HTML5 standard

    // first set of conditions check for valid keywords with their parameters
    if (
        substr($lc_raw_intent, 0, 4) == "tap " or
        substr($lc_raw_intent, 0, 6) == "click "
    ) {
        return "tap";
    }
    if (
        substr($lc_raw_intent, 0, 5) == "rtap " or
        substr($lc_raw_intent, 0, 7) == "rclick "
    ) {
        return "rtap";
    }
    if (
        substr($lc_raw_intent, 0, 5) == "dtap " or
        substr($lc_raw_intent, 0, 7) == "dclick "
    ) {
        return "dtap";
    }
    if (
        substr($lc_raw_intent, 0, 6) == "hover " or
        substr($lc_raw_intent, 0, 5) == "move "
    ) {
        return "hover";
    }
    if (
        substr($lc_raw_intent, 0, 5) == "type " or
        substr($lc_raw_intent, 0, 6) == "enter "
    ) {
        return "type";
    }
    if (
        substr($lc_raw_intent, 0, 7) == "select " or
        substr($lc_raw_intent, 0, 7) == "choose "
    ) {
        return "select";
    }
    if (
        substr($lc_raw_intent, 0, 5) == "read " or
        substr($lc_raw_intent, 0, 6) == "fetch "
    ) {
        return "read";
    }
    if (
        substr($lc_raw_intent, 0, 5) == "show " or
        substr($lc_raw_intent, 0, 6) == "print "
    ) {
        return "show";
    }
    if (
        substr($lc_raw_intent, 0, 3) == "up " or
        substr($lc_raw_intent, 0, 7) == "upload "
    ) {
        return "upload";
    }
    if (
        substr($lc_raw_intent, 0, 5) == "down " or
        substr($lc_raw_intent, 0, 9) == "download "
    ) {
        return "down";
    }
    if (substr($lc_raw_intent, 0, 8) == "receive ") {
        return "receive";
    }
    if (substr($lc_raw_intent, 0, 5) == "echo ") {
        return "echo";
    }
    if (substr($lc_raw_intent, 0, 5) == "save ") {
        return "save";
    }
    if (substr($lc_raw_intent, 0, 5) == "dump ") {
        return "dump";
    }
    if (substr($lc_raw_intent, 0, 6) == "write ") {
        return "write";
    }
    if (substr($lc_raw_intent, 0, 5) == "load ") {
        return "load";
    }
    if (substr($lc_raw_intent, 0, 5) == "snap ") {
        return "snap";
    }
    if (substr($lc_raw_intent, 0, 6) == "table ") {
        return "table";
    }
    if (substr($lc_raw_intent, 0, 5) == "wait ") {
        return "wait";
    }
    if (substr($lc_raw_intent, 0, 5) == "live ") {
        return "live";
    }
    if (substr($lc_raw_intent, 0, 4) == "ask ") {
        return "ask";
    }
    if (substr($lc_raw_intent, 0, 9) == "keyboard ") {
        return "keyboard";
    }
    if (substr($lc_raw_intent, 0, 6) == "mouse ") {
        return "mouse";
    }
    if (substr($lc_raw_intent, 0, 6) == "check ") {
        $GLOBALS['test_automation']++;
        return "check";
    }
    if (substr($lc_raw_intent, 0, 5) == "test ") {
        return "test";
    }
    if (substr($lc_raw_intent, 0, 6) == "frame ") {
        return "frame";
    }
    if (substr($lc_raw_intent, 0, 6) == "popup ") {
        return "popup";
    }
    if (substr($lc_raw_intent, 0, 4) == "api ") {
        return "api";
    }
    if (substr($lc_raw_intent, 0, 4) == "run ") {
        return "run";
    }
    if (substr($lc_raw_intent, 0, 4) == "dom ") {
        return "dom";
    }
    if (substr($lc_raw_intent, 0, 3) == "js ") {
        return "js";
    }
    if (substr($lc_raw_intent, 0, 2) == "r ") {
        return "r";
    }
    if (substr($lc_raw_intent, 0, 3) == "py ") {
        return "py";
    }
    if (substr($lc_raw_intent, 0, 7) == "vision ") {
        return "vision";
    }
    if (substr($lc_raw_intent, 0, 8) == "timeout ") {
        return "timeout";
    }

    // second set of conditions check for valid keywords with missing parameters
    if ($lc_raw_intent == "tap" or $lc_raw_intent == "click") {
        return "tap";
    }
    if ($lc_raw_intent == "rtap" or $lc_raw_intent == "rclick") {
        return "rtap";
    }
    if ($lc_raw_intent == "dtap" or $lc_raw_intent == "dclick") {
        return "dtap";
    }
    if ($lc_raw_intent == "hover" or $lc_raw_intent == "move") {
        return "hover";
    }
    if ($lc_raw_intent == "type" or $lc_raw_intent == "enter") {
        return "type";
    }
    if ($lc_raw_intent == "select" or $lc_raw_intent == "choose") {
        return "select";
    }
    if ($lc_raw_intent == "read" or $lc_raw_intent == "fetch") {
        return "read";
    }
    if ($lc_raw_intent == "show" or $lc_raw_intent == "print") {
        return "show";
    }
    if ($lc_raw_intent == "up" or $lc_raw_intent == "upload") {
        return "upload";
    }
    if ($lc_raw_intent == "down" or $lc_raw_intent == "download") {
        return "down";
    }
    if ($lc_raw_intent == "receive") {
        return "receive";
    }
    if ($lc_raw_intent == "echo") {
        return "echo";
    }
    if ($lc_raw_intent == "save") {
        return "save";
    }
    if ($lc_raw_intent == "dump") {
        return "dump";
    }
    if ($lc_raw_intent == "write") {
        return "write";
    }
    if ($lc_raw_intent == "load") {
        return "load";
    }
    if ($lc_raw_intent == "snap") {
        return "snap";
    }
    if ($lc_raw_intent == "table") {
        return "table";
    }
    if ($lc_raw_intent == "wait") {
        return "wait";
    }
    if ($lc_raw_intent == "live") {
        return "live";
    }
    if ($lc_raw_intent == "ask") {
        return "ask";
    }
    if ($lc_raw_intent == "keyboard") {
        return "keyboard";
    }
    if ($lc_raw_intent == "mouse") {
        return "mouse";
    }
    if ($lc_raw_intent == "check") {
        $GLOBALS['test_automation']++;
        return "check";
    }
    if ($lc_raw_intent == "test") {
        return "test";
    }
    if ($lc_raw_intent == "frame") {
        return "frame";
    }
    if ($lc_raw_intent == "popup") {
        return "popup";
    }
    if ($lc_raw_intent == "api") {
        return "api";
    }
    if ($lc_raw_intent == "run") {
        return "run";
    }
    if ($lc_raw_intent == "dom") {
        return "dom";
    }
    if ($lc_raw_intent == "js") {
        return "js";
    }
    if ($lc_raw_intent == "r") {
        return "r";
    }
    if ($lc_raw_intent == "py") {
        return "py";
    }
    if ($lc_raw_intent == "vision") {
        return "vision";
    }
    if ($lc_raw_intent == "timeout") {
        return "timeout";
    }

    // final check for recognized code before returning error
    if (is_code($raw_intent)) {
        return "code";
    } else {
        return "error";
    }
}

function is_code($raw_intent)
{
    // due to asynchronous waiting for element, if/for/while can work for parsing single step
    // other scenarios can be assumed to behave as unparsed javascript in casperjs context
    // to let if/for/while handle multiple steps/code use the { and } steps to define block
    if (
        substr($raw_intent, 0, 4) == "var " or
        substr($raw_intent, 0, 3) == "do "
    ) {
        return true;
    }
    if (substr($raw_intent, 0, 1) == "{" or substr($raw_intent, 0, 1) == "}") {
        return true;
    }
    if (substr($raw_intent, -1) == "{" or substr($raw_intent, -1) == "}") {
        return true;
    }
    if (
        substr($raw_intent, 0, 3) == "if " or
        substr($raw_intent, 0, 4) == "else"
    ) {
        return true;
    }
    if (
        substr($raw_intent, 0, 4) == "for " or
        substr($raw_intent, 0, 6) == "while "
    ) {
        return true;
    }
    if (
        substr($raw_intent, 0, 7) == "switch " or
        substr($raw_intent, 0, 5) == "case "
    ) {
        return true;
    }
    if (substr($raw_intent, 0, 6) == "break;" or $raw_intent == "break") {
        return true;
    }
    if (substr($raw_intent, 0, 9) == "continue;" or $raw_intent == "continue") {
        return true;
    }
    if (
        substr($raw_intent, 0, 7) == "casper." or
        substr($raw_intent, 0, 5) == "this."
    ) {
        return true;
    }
    if (substr($raw_intent, 0, 7) == "chrome.") {
        return true;
    } // chrome object for chrome integration
    if (substr($raw_intent, 0, 5) == "test.") {
        $GLOBALS['test_automation']++;
        return true;
    }
    if (substr($raw_intent, 0, 2) == "//") {
        $GLOBALS['real_line_number']--;
        return true;
    }
    if (substr($raw_intent, -1) == ";") {
        return true;
    }
    if (substr($raw_intent, 0, 9) == "function ") {
        return true;
    }
    // assume = is assignment statement, kinda acceptable as this is checked at the very end
    if (strpos($raw_intent, "=") !== false) {
        return true;
    }
    return false;
}

function abs_file($filename)
{
    // helper function to return absolute filename
    if ($filename == "") {
        return "";
    }
    $flow_script = $GLOBALS['script']; // get flow filename
    if (substr($filename, 0, 1) == "/") {
        return $filename;
    } // return mac/linux absolute filename directly
    if (substr($filename, 1, 1) == ":") {
        return str_replace("\\", "/", $filename);
    } // return windows absolute filename directly
    if (
        strpos($filename, "'+") !== false and
        strpos($filename, "+'") !== false
    ) {
        return "'+abs_file('" . $filename . "')+'";
    } // throw to runtime abs_file function if dynamic filename is given
    if (is_coordinates($filename)) {
        return $filename;
    } // to handle when sikuli (x,y) coordinates locator is provided
    $flow_path = str_replace("\\", "/", dirname($flow_script)); // otherwise use flow script path to build absolute filename
    // above str_replace is because casperjs/phantomjs do not seem to support \ for windows paths, replace with / to work
    if (strpos($flow_path, "/") !== false) {
        return str_replace("\\", "/", $flow_path . '/' . $filename);
    } else {
        return $flow_path . '\\' . $filename;
    }
}

function beg_tx($locator)
{
    // helper function to return beginning string for handling locators
    if ($GLOBALS['inside_while_loop'] == 0) {
        return "\ncasper.waitFor(function check() {return check_tx('" .
            $locator .
            "');},\nfunction then() {";
    } else {
        return " // beg_tx while loop marker\n";
    }
}

function end_tx($locator)
{
    // helper function to return ending string for handling locators
    if ($GLOBALS['inside_while_loop'] == 0) {
        return "},\nfunction timeout() {this.echo('ERROR - cannot find " .
            $locator .
            "').exit();});}" .
            "});" .
            end_fi() .
            "\n\n";
    } elseif ($GLOBALS['inside_code_block'] == 0) {
        $GLOBALS['inside_while_loop'] = 0; // reset inside_while_loop if not inside block
        $GLOBALS['for_loop_tracker'] = ""; // reset for_loop_tracker if not inside block
        return "\n";
    } else {
        return "\n";
    }
}

function end_fi()
{
    // used to be a helper function primarily to end frame_intent by closing parsed step block
    if ($GLOBALS['inside_code_block'] == 0) {
        $GLOBALS['inside_while_loop'] = 0;
    } // reset inside_while_loop if not inside block
    if ($GLOBALS['inside_code_block'] == 0) {
        $GLOBALS['for_loop_tracker'] = "";
    } // reset for_loop_tracker if not inside block
    if ($GLOBALS['inside_while_loop'] == 1) {
        return " // end_fi while loop marker";
    }
    return "";
}

function add_concat($source_string)
{
    // parse string and add missing + concatenator
    if (
        strpos($source_string, "'") !== false and
        strpos($source_string, "\"") !== false
    ) {
        echo "ERROR - " .
            current_line() .
            " inconsistent quotes in " .
            $source_string .
            "\n";
    } elseif (strpos($source_string, "'") !== false) {
        $quote_type = "'";
    }
    // derive quote type used
    elseif (strpos($source_string, "\"") !== false) {
        $quote_type = "\"";
    } else {
        $quote_type = "none";
    }
    $within_quote = false;
    $source_string = trim($source_string); // trim for future proof
    for ($srcpos = 0; $srcpos < strlen($source_string); $srcpos++) {
        if ($source_string[$srcpos] == $quote_type) {
            $within_quote = !$within_quote;
        }
        if ($within_quote == false and $source_string[$srcpos] == " ") {
            $source_string[$srcpos] = "+";
        }
    }
    $source_string = str_replace("+++++", "+", $source_string);
    $source_string = str_replace("++++", "+", $source_string);
    $source_string = str_replace("+++", "+", $source_string);
    $source_string = str_replace("++", "+", $source_string);
    return $source_string;
} // replacing multiple variations of + to handle user typos of double spaces etc

function is_coordinates($input_params)
{
    // helper function to check if string is (x,y) coordinates
    if (
        strlen($input_params) > 4 and
        substr($input_params, 0, 1) == '(' and
        substr($input_params, -1) == ')' and
        (substr_count($input_params, ',') == 1 or
            substr_count($input_params, ',') == 2) and
        (strpos($input_params, "'+") !== false and
            strpos($input_params, "+'") !== false or
            !preg_match('/[a-zA-Z]/', $input_params))
    ) {
        return true;
    } else {
        return false;
    }
}

function is_sikuli($input_params)
{
    // helper function to check if input is meant for sikuli visual automation
    if (
        strlen($input_params) > 4 and
        strtolower(substr($input_params, -4)) == '.png'
    ) {
        return true;
    }
    // support png and bmp
    elseif (
        strlen($input_params) > 4 and
        strtolower(substr($input_params, -4)) == '.bmp'
    ) {
        return true;
    } elseif (is_coordinates($input_params)) {
        return true;
    } else {
        return false;
    }
}

function call_sikuli($input_intent, $input_params, $other_actions = '')
{
    // helper function to use sikuli visual automation
    if (!touch('tagui.sikuli/tagui_sikuli.in')) {
        die("ERROR - cannot initialise tagui_sikuli.in\n");
    }
    if (!touch('tagui.sikuli/tagui_sikuli.out')) {
        die("ERROR - cannot initialise tagui_sikuli.out\n");
    }
    if ($other_actions != '') {
        $other_actions = "\n" . $other_actions;
    }
    return "{techo('" .
        str_replace(' to snap_image()', '', $input_intent) .
        "'); var fs = require('fs');\n" .
        "if (!sikuli_step('" .
        $input_intent .
        "')) if (!fs.exists('" .
        $input_params .
        "'))\n" .
        "this.echo('ERROR - cannot find image file " .
        $input_params .
        "').exit(); else\n" .
        "this.echo('ERROR - cannot find " .
        $input_params .
        " on screen').exit(); this.wait(0);" .
        $other_actions .
        "}" .
        end_fi() .
        "});\n\n";
}

function call_r($input_intent)
{
    // helper function to use R integration for data analytics and machine learning
    if (!touch('tagui_r/tagui_r.in')) {
        die("ERROR - cannot initialise tagui_r.in\n");
    }
    if (!touch('tagui_r/tagui_r.out')) {
        die("ERROR - cannot initialise tagui_r.out\n");
    }
    return "{techo('" .
        $input_intent .
        "');\n" .
        "r_result = ''; if (!r_step('" .
        $input_intent .
        "'))\n" .
        "this.echo('ERROR - cannot execute R command(s)').exit(); this.wait(0);\n" .
        "r_result = fetch_r_text(); clear_r_text();\n" .
        "try {r_json = JSON.parse(r_result);} catch(e) {r_json = JSON.parse('null');}}" .
        end_fi() .
        "});\n\n";
}

function call_py($input_intent)
{
    // helper function to use Python integration for data analytics and machine learning
    if (!touch('tagui_py/tagui_py.in')) {
        die("ERROR - cannot initialise tagui_py.in\n");
    }
    if (!touch('tagui_py/tagui_py.out')) {
        die("ERROR - cannot initialise tagui_py.out\n");
    }
    return "{techo('" .
        $input_intent .
        "');\n" .
        "py_result = ''; if (!py_step('" .
        $input_intent .
        "'))\n" .
        "this.echo('ERROR - cannot execute Python command(s)').exit(); this.wait(0);\n" .
        "py_result = fetch_py_text(); clear_py_text();\n" .
        "try {py_json = JSON.parse(py_result);} catch(e) {py_json = JSON.parse('null');}}" .
        end_fi() .
        "});\n\n";
}

// set of functions to interpret steps into corresponding casperjs code
function url_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    $casper_url = $raw_intent;
    $chrome_call = '';
    if ($twb == 'chrome') {
        $chrome_call =
            "var download_path = flow_path; // to set path correctly for Windows\n" .
            "if (download_path.indexOf(':')>0) download_path = download_path.replace(/\//g,'\\\\').replace(/\\\\/g,'\\\\');\n" .
            "chrome_step('Page.setDownloadBehavior',{behavior: 'allow', downloadPath: download_path});\n";
        $casper_url = 'about:blank';
        $chrome_call .=
            "chrome_step('Page.navigate',{url: '" .
            $raw_intent .
            "'}); sleep(1000);\n";
    }
    if (
        strpos($raw_intent, "'+") !== false and
        strpos($raw_intent, "+'") !== false
    ) {
        // check if dynamic url is used
        // wrap step within casper context if variable (casper context) is used in url, in order to access variable
        $dynamic_header = "casper.then(function() {";
        $dynamic_footer = "}); // end of dynamic url block";
    } else {
        $dynamic_header = "";
        $dynamic_footer = ""; // else casper.start/thenOpen can be outside casper context
        if (filter_var($raw_intent, FILTER_VALIDATE_URL) == false) {
            if ($raw_intent != 'about:blank') {
                // do url validation only for raw text url string
                echo "ERROR - " .
                    current_line() .
                    " invalid URL " .
                    $raw_intent .
                    "\n";
            }
        }
    }
    if ($GLOBALS['real_line_number'] == 1) {
        // use casper.start for first URL call and casper.thenOpen for subsequent calls
        $GLOBALS['url_provided'] = true;
        return $dynamic_header .
            "casper.start('" .
            $casper_url .
            "', function() {\n" .
            $chrome_call .
            "techo('" .
            $raw_intent .
            "' + ' - ' + " .
            $twb .
            ".getTitle() + '\\n');});" .
            $dynamic_footer .
            "\n\n";
    } else {
        return $dynamic_header .
            "casper.thenOpen('" .
            $casper_url .
            "', function() {\n" .
            $chrome_call .
            "techo('" .
            $raw_intent .
            "' + ' - ' + " .
            $twb .
            ".getTitle());});" .
            $dynamic_footer .
            "\n\n";
    }
}

function tap_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if (is_sikuli($params)) {
        $abs_params = abs_file($params);
        $abs_intent = str_replace($params, $abs_params, $raw_intent);
        return "casper.then(function() {" .
            call_sikuli($abs_intent, $abs_params);
    } // use sikuli visual automation as needed
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " target missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');" .
            beg_tx($params) .
            $twb .
            ".click(tx('" .
            $params .
            "'));" .
            end_tx($params);
    }
}

function rtap_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if (is_sikuli($params)) {
        $abs_params = abs_file($params);
        $abs_intent = str_replace($params, $abs_params, $raw_intent);
        return "casper.then(function() {" .
            call_sikuli($abs_intent, $abs_params);
    } // use sikuli visual automation as needed
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " target missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');" .
            beg_tx($params) .
            $twb .
            ".mouse.rightclick(tx('" .
            $params .
            "'));" .
            end_tx($params);
    }
}

function dtap_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if (is_sikuli($params)) {
        $abs_params = abs_file($params);
        $abs_intent = str_replace($params, $abs_params, $raw_intent);
        return "casper.then(function() {" .
            call_sikuli($abs_intent, $abs_params);
    } // use sikuli visual automation as needed
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " target missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');" .
            beg_tx($params) .
            $twb .
            ".mouse.doubleclick(tx('" .
            $params .
            "'));" .
            end_tx($params);
    }
}

function hover_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if (is_sikuli($params)) {
        $abs_params = abs_file($params);
        $abs_intent = str_replace($params, $abs_params, $raw_intent);
        return "casper.then(function() {" .
            call_sikuli($abs_intent, $abs_params);
    } // use sikuli visual automation as needed
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " target missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');" .
            beg_tx($params) .
            $twb .
            ".mouse.move(tx('" .
            $params .
            "'));" .
            end_tx($params);
    }
}

function type_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    $param1 = trim(substr($params, 0, strpos($params, " as ")));
    $param2 = trim(substr($params, 4 + strpos($params, " as ")));
    if (is_sikuli($param1) and $param2 != "") {
        $abs_param1 = abs_file($param1);
        $abs_intent = str_replace($param1, $abs_param1, $raw_intent);
        return "casper.then(function() {" .
            call_sikuli($abs_intent, $abs_param1);
    } // use sikuli visual automation as needed
    if ($param1 == "" or $param2 == "") {
        echo "ERROR - " .
            current_line() .
            " target/text missing for " .
            $raw_intent .
            "\n";
    } else {
        // special handling for [clear] keyword to clear text field by doing an extra step to clear the field
        if (substr($param2, 0, 7) == "[clear]") {
            if (strlen($param2) > 7) {
                $param2 = substr($param2, 7);
            } else {
                $param2 = "";
            }
            $clear_field =
                $twb . ".sendKeys(tx('" . $param1 . "'),'',{reset: true});\n";
        } else {
            $clear_field = "";
        }
        if (strpos($param2, "[enter]") === false) {
            return "casper.then(function() {" .
                "{techo('" .
                $raw_intent .
                "');" .
                beg_tx($param1) .
                $clear_field .
                $twb .
                ".sendKeys(tx('" .
                $param1 .
                "'),'" .
                $param2 .
                "');" .
                end_tx($param1);
        }
        // special handling for [enter] keyword to send enter key events
        else {
            $param2 = str_replace(
                "[enter]",
                "',{keepFocus: true});\n" .
                    $twb .
                    ".sendKeys(tx('" .
                    $param1 .
                    "'),casper.page.event.key.Enter,{keepFocus: true});\n" .
                    $twb .
                    ".sendKeys(tx('" .
                    $param1 .
                    "'),'",
                $param2
            );
            return "casper.then(function() {" .
                "{techo('" .
                $raw_intent .
                "');" .
                beg_tx($param1) .
                $clear_field .
                $twb .
                ".sendKeys(tx('" .
                $param1 .
                "'),'" .
                $param2 .
                "',{keepFocus: true});" .
                end_tx($param1);
        }
    }
}

function select_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    $param1 = trim(substr($params, 0, strpos($params, " as ")));
    $param2 = trim(substr($params, 4 + strpos($params, " as ")));
    if (is_sikuli($param1) and is_sikuli($param2)) {
        $abs_param1 = abs_file($param1);
        $abs_intent = str_replace($param1, $abs_param1, $raw_intent);
        $abs_param2 = abs_file($param2);
        $abs_intent = str_replace($param2, $abs_param2, $abs_intent);
        return "casper.then(function() {" .
            call_sikuli($abs_intent, $abs_param1);
    } // use sikuli visual automation as needed
    if ($param1 == "" or $param2 == "") {
        echo "ERROR - " .
            current_line() .
            " target/option missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');" .
            beg_tx($param1) .
            "var select_locator = tx('" .
            $param1 .
            "');\n" .
            "if (is_xpath_selector(select_locator.toString().replace('xpath selector: ','')))\n" .
            "select_locator = select_locator.toString().substring(16);\n" .
            $twb .
            ".selectOptionByValue(select_locator,'" .
            $param2 .
            "');" .
            end_tx($param1);
    }
}

function read_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    $param1 = trim(substr($params, 0, strpos($params, " to ")));
    $param2 = trim(substr($params, 4 + strpos($params, " to ")));
    if (is_sikuli($param1) and strpos($params, " to ") !== false) {
        // use sikuli visual automation as needed
        $abs_param1 = abs_file($param1);
        $abs_intent = str_replace($param1, $abs_param1, $raw_intent);
        return "casper.then(function() {" .
            call_sikuli(
                $abs_intent,
                $abs_param1,
                $param2 . " = fetch_sikuli_text(); clear_sikuli_text();"
            );
    }
    if (strtolower($param1) == "page" and $param2 != "") {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');\n" .
            $param2 .
            " = " .
            $twb .
            ".getHTML();}" .
            end_fi() .
            "});" .
            "\n\n";
    }
    if ($param1 == "" or $param2 == "") {
        echo "ERROR - " .
            current_line() .
            " target/variable missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');" .
            beg_tx($param1) .
            $param2 .
            " = " .
            $twb .
            ".fetchText(tx('" .
            $param1 .
            "')).trim();" .
            end_tx($param1);
    }
}

function show_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if (is_sikuli($params)) {
        // use sikuli visual automation as needed
        $abs_params = abs_file($params);
        $abs_intent = str_replace($params, $abs_params, $raw_intent);
        return "casper.then(function() {" .
            call_sikuli(
                $abs_intent,
                $abs_params,
                "this.echo(fetch_sikuli_text()); clear_sikuli_text();"
            );
    }
    if (strtolower($params) == "page") {
        return "casper.then(function() {" .
            "this.echo('" .
            $raw_intent .
            "' + ' - \\n' + " .
            $twb .
            ".getHTML());" .
            end_fi() .
            "});" .
            "\n\n";
    }
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " target missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');" .
            beg_tx($params) .
            "this.echo(" .
            $twb .
            ".fetchText(tx('" .
            $params .
            "')).trim());" .
            end_tx($params);
    }
}

function upload_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    $param1 = trim(substr($params, 0, strpos($params, " as ")));
    $param2 = trim(substr($params, 4 + strpos($params, " as ")));
    if ($param1 == "" or $param2 == "") {
        echo "ERROR - " .
            current_line() .
            " filename missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');" .
            beg_tx($param1) .
            $twb .
            ".page.uploadFile(tx('" .
            $param1 .
            "'),'" .
            abs_file($param2) .
            "');" .
            end_tx($param1);
    }
}

function down_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    $param1 = trim(substr($params, 0, strpos($params, " to ")));
    $param2 = trim(substr($params, 4 + strpos($params, " to ")));
    if ($param1 == "" or $param2 == "") {
        echo "ERROR - " .
            current_line() .
            " url/filename missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');\n" .
            $twb .
            ".download('" .
            $param1 .
            "','" .
            abs_file($param2) .
            "');}" .
            end_fi() .
            "});" .
            "\n\n";
    }
}

function receive_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    $param1 = trim(substr($params, 0, strpos($params, " to ")));
    $param2 = trim(substr($params, 4 + strpos($params, " to ")));
    if ($param1 == "" or $param2 == "") {
        echo "ERROR - " .
            current_line() .
            " keyword/filename missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');\n" .
            "casper.on('resource.received', function(resource) {if (resource.stage !== 'end') return;\n" .
            "if (resource.url.indexOf('" .
            $param1 .
            "') > -1) " .
            $twb .
            ".download(resource.url, '" .
            abs_file($param2) .
            "');});}" .
            end_fi() .
            "});" .
            "\n\n";
    }
}

function echo_intent($raw_intent)
{
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " text missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            "this.echo(" .
            add_concat($params) .
            ");" .
            end_fi() .
            "});" .
            "\n\n";
    }
}

function save_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    $param1 = trim(substr($params, 0, strpos($params, " to ")));
    $param2 = trim(substr($params, 4 + strpos($params, " to ")));
    if (is_sikuli($param1) and strpos($params, " to ") !== false) {
        // use sikuli visual automation as needed
        $abs_param1 = abs_file($param1);
        $abs_intent = str_replace($param1, $abs_param1, $raw_intent);
        return "casper.then(function() {" .
            call_sikuli(
                $abs_intent,
                $abs_param1,
                "save_text('" .
                    abs_file($param2) .
                    "',fetch_sikuli_text()); clear_sikuli_text();"
            );
    } elseif (is_sikuli($params) and strpos($params, " to ") == false) {
        $abs_params = abs_file($params);
        $abs_intent = str_replace($params, $abs_params, $raw_intent);
        return "casper.then(function() {" .
            call_sikuli(
                $abs_intent,
                $abs_param1,
                "save_text('',fetch_sikuli_text()); clear_sikuli_text();"
            );
    }
    if (strtolower($params) == "page" or strtolower($param1) == "page") {
        if (strpos($params, " to ") !== false) {
            return "casper.then(function() {" .
                "{techo('" .
                $raw_intent .
                "');\nsave_text('" .
                abs_file($param2) .
                "'," .
                $twb .
                ".getHTML());}" .
                end_fi() .
                "});" .
                "\n\n";
        } else {
            return "casper.then(function() {" .
                "{techo('" .
                $raw_intent .
                "');\nsave_text(''," .
                $twb .
                ".getHTML());}" .
                end_fi() .
                "});" .
                "\n\n";
        }
    }
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " target missing for " .
            $raw_intent .
            "\n";
    } elseif (strpos($params, " to ") !== false) {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');" .
            beg_tx($param1) .
            "save_text('" .
            abs_file($param2) .
            "'," .
            $twb .
            ".fetchText(tx('" .
            $param1 .
            "')).trim());" .
            end_tx($param1);
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');" .
            beg_tx($params) .
            "save_text(''," .
            $twb .
            ".fetchText(tx('" .
            $params .
            "')).trim());" .
            end_tx($params);
    }
}

function dump_intent($raw_intent)
{
    $safe_intent = str_replace("'", "\'", $raw_intent); // avoid breaking echo below when single quote is used
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    $param1 = trim(substr($params, 0, strpos($params, " to ")));
    $param2 = trim(substr($params, 4 + strpos($params, " to ")));
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " variable missing for " .
            $raw_intent .
            "\n";
    } elseif (strpos($params, " to ") !== false) {
        return "casper.then(function() {" .
            "{techo('" .
            $safe_intent .
            "');\nsave_text('" .
            abs_file($param2) .
            "'," .
            add_concat($param1) .
            ");}" .
            end_fi() .
            "});" .
            "\n\n";
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $safe_intent .
            "');\nsave_text(''," .
            add_concat($params) .
            ");}" .
            end_fi() .
            "});" .
            "\n\n";
    }
}

function write_intent($raw_intent)
{
    $safe_intent = str_replace("'", "\'", $raw_intent); // avoid breaking echo below when single quote is used
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    $param1 = trim(substr($params, 0, strpos($params, " to ")));
    $param2 = trim(substr($params, 4 + strpos($params, " to ")));
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " variable missing for " .
            $raw_intent .
            "\n";
    } elseif (strpos($params, " to ") !== false) {
        return "casper.then(function() {" .
            "{techo('" .
            $safe_intent .
            "');\nappend_text('" .
            abs_file($param2) .
            "'," .
            add_concat($param1) .
            ");}" .
            end_fi() .
            "});" .
            "\n\n";
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $safe_intent .
            "');\nappend_text(''," .
            add_concat($params) .
            ");}" .
            end_fi() .
            "});" .
            "\n\n";
    }
}

function load_intent($raw_intent)
{
    $safe_intent = str_replace("'", "\'", $raw_intent); // avoid breaking echo below when single quote is used
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    $param1 = trim(substr($params, 0, strpos($params, " to ")));
    $param2 = trim(substr($params, 4 + strpos($params, " to ")));
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " filename missing for " .
            $raw_intent .
            "\n";
    } elseif (strpos($params, " to ") !== false) {
        return "casper.then(function() {" .
            "{techo('" .
            $safe_intent .
            "');\nvar fs = require('fs'); " .
            $param2 .
            " = '';\n" .
            "if (fs.exists('" .
            abs_file($param1) .
            "'))\n" .
            $param2 .
            " = fs.read('" .
            abs_file($param1) .
            "').trim();\n" .
            "else this.echo('ERROR - cannot find file " .
            $param1 .
            "').exit();}" .
            end_fi() .
            "});" .
            "\n\n";
    } else {
        echo "ERROR - " .
            current_line() .
            " variable missing for " .
            $raw_intent .
            "\n";
    }
}

function snap_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    $param1 = trim(substr($params, 0, strpos($params, " to ")));
    $param2 = trim(substr($params, 4 + strpos($params, " to ")));
    if (is_sikuli($param1) and strpos($params, " to ") !== false) {
        $abs_param1 = abs_file($param1);
        $abs_intent = str_replace($param1, $abs_param1, $raw_intent);
        $abs_param2 = abs_file($param2);
        $abs_intent = str_replace($param2, $abs_param2, $abs_intent);
        return "casper.then(function() {" .
            call_sikuli($abs_intent, $abs_param1);
    }
    // use sikuli visual automation as needed
    elseif (is_sikuli($params) and strpos($params, " to ") == false) {
        $abs_params = abs_file($params);
        $abs_intent = str_replace($params, $abs_params, $raw_intent);
        return "casper.then(function() {" .
            call_sikuli($abs_intent . ' to snap_image()', $abs_params);
    } // handle no output filename
    if (strtolower($params) == "page" or strtolower($param1) == "page") {
        if (strpos($params, " to ") !== false) {
            return "casper.then(function() {" .
                "{techo('" .
                $raw_intent .
                "');\n" .
                $twb .
                ".capture('" .
                abs_file($param2) .
                "');}" .
                end_fi() .
                "});" .
                "\n\n";
        } else {
            return "casper.then(function() {" .
                "{techo('" .
                $raw_intent .
                "');\n" .
                $twb .
                ".capture(snap_image());}" .
                end_fi() .
                "});" .
                "\n\n";
        }
    }
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " target missing for " .
            $raw_intent .
            "\n";
    } elseif (strpos($params, " to ") !== false) {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');" .
            beg_tx($param1) .
            $twb .
            ".captureSelector('" .
            abs_file($param2) .
            "',tx('" .
            $param1 .
            "'));" .
            end_tx($param1);
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');" .
            beg_tx($params) .
            $twb .
            ".captureSelector(snap_image(),tx('" .
            $params .
            "'));" .
            end_tx($params);
    }
}

function table_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    $param1 = trim(substr($params, 0, strpos($params, " to ")));
    $param2 = trim(substr($params, 4 + strpos($params, " to ")));
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " target missing for " .
            $raw_intent .
            "\n";
    } elseif (strpos($params, " to ") !== false) {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');" .
            beg_tx($param1) .
            "save_table('" .
            abs_file($param2) .
            "',tx('" .
            $param1 .
            "'));" .
            end_tx($param1);
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');" .
            beg_tx($params) .
            "save_table('',tx('" .
            $params .
            "'));" .
            end_tx($params);
    }
}

function wait_intent($raw_intent)
{
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if ($params == "") {
        $params = "5";
    }
    if (strpos($params, "'+") !== false and strpos($params, "+'") !== false) {
        // handling for dynamic time
        return "casper.then(function() {" .
            "techo('" .
            $raw_intent .
            "');});\ncasper.then(function() {casper.wait((parseFloat('" .
            $params .
            "')*1000), function() {" .
            "});});" .
            "\n\n";
    } else {
        return "casper.then(function() {" .
            "techo('" .
            $raw_intent .
            "');});\ncasper.then(function() {casper.wait(" .
            floatval($params) * 1000 .
            ", function() {" .
            "});});" .
            "\n\n";
    }
}

function live_intent($raw_intent)
{
    // live mode to interactively test tagui steps and js code (casperjs context)
    return "casper.then(function() {" .
        "{var live_input = '';\nvar sys = require('system'); sys.stdout.write('LIVE MODE - type done to quit\\n \\b');\n" .
        "while (true) {live_input = sys.stdin.readLine(); // evaluate input in casperjs context until done is entered\n" .
        "if (live_input.indexOf('done') == 0) break; try {eval(tagui_parse(live_input));}
catch(e) {this.echo('ERROR - ' + e.message.charAt(0).toLowerCase() + e.message.slice(1));}}}" .
        end_fi() .
        "});" .
        "\n\n";
}

function ask_intent($raw_intent)
{
    // ask user for input during automation and save to ask_result variable
    $raw_intent = str_replace("\'", "'", $raw_intent);
    $raw_intent = str_replace("'", "\'", $raw_intent);
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " prompt missing for " .
            $raw_intent .
            "\n";
    } elseif (getenv('tagui_web_browser') == 'chrome') {
        // show a popup window if running on visible chrome mode
        return "casper.then(function() {" .
            "{ask_result = ''; ask_result = chrome.evaluate(function() {\nreturn prompt('" .
            $params .
            "');}); " .
            "if (ask_result == null) ask_result = '';}" .
            end_fi() .
            "});" .
            "\n\n";
    } else {
        return "casper.then(function() {" .
            "{ask_result = ''; var sys = require('system');\nthis.echo('" .
            $params .
            " '); " .
            "ask_result = sys.stdin.readLine();}" .
            end_fi() .
            "});" .
            "\n\n";
    }
}

function keyboard_intent($raw_intent)
{
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " keys to type missing for " .
            $raw_intent .
            "\n";
    }
    return "casper.then(function() {" . call_sikuli($raw_intent, $params);
}

function mouse_intent($raw_intent)
{
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " down / up missing for " .
            $raw_intent .
            "\n";
    } elseif (strtolower($params) == "down") {
        return "casper.then(function() {" . call_sikuli($raw_intent, "down");
    } elseif (strtolower($params) == "up") {
        return "casper.then(function() {" . call_sikuli($raw_intent, "up");
    } else {
        echo "ERROR - " .
            current_line() .
            " cannot understand step " .
            $raw_intent .
            "\n";
    }
}

// helper function as check_intent() adds an if block that immediately closes without going through closure handling
function check_intent_clear_injected_if_block()
{
    $last_delimiter_pos = strrpos($GLOBALS['code_block_tracker'], "|");
    $GLOBALS['code_block_tracker'] = substr(
        $GLOBALS['code_block_tracker'],
        0,
        $last_delimiter_pos
    );
    return "";
}

function check_intent($raw_intent)
{
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    $params = str_replace("||", " JAVASCRIPT_OR ", $params); // to handle conflict with "|" delimiter
    $param1 = trim(substr($params, 0, strpos($params, "|")));
    $param2 = trim(substr($params, 1 + strpos($params, "|")));
    $param3 = trim(substr($param2, 1 + strpos($param2, "|")));
    $param2 = trim(substr($param2, 0, strpos($param2, "|")));
    $param1 = str_replace(" JAVASCRIPT_OR ", "||", $param1); // to restore back "||" that were replaced
    $param2 = str_replace(" JAVASCRIPT_OR ", "||", $param2);
    $param3 = str_replace(" JAVASCRIPT_OR ", "||", $param3);
    if (substr_count($params, "|") != 2) {
        echo "ERROR - " .
            current_line() .
            " if/true/false missing for " .
            $raw_intent .
            "\n";
    } elseif (getenv('tagui_test_mode') == 'true') {
        return "casper.then(function() {" .
            "{" .
            parse_condition("if " . $param1) .
            "\ntest.assert(true," .
            add_concat($param2) .
            ");\nelse test.assert(false," .
            add_concat($param3) .
            ");}" .
            check_intent_clear_injected_if_block() .
            end_fi() .
            "});" .
            "\n\n";
    } else {
        return "casper.then(function() {" .
            "{" .
            parse_condition("if " . $param1) .
            "\nthis.echo(" .
            add_concat($param2) .
            ");\nelse this.echo(" .
            add_concat($param3) .
            ");}" .
            check_intent_clear_injected_if_block() .
            end_fi() .
            "});" .
            "\n\n";
    }
}

function test_intent($raw_intent)
{
    echo "ERROR - " .
        current_line() .
        " use CasperJS tester module to professionally " .
        $raw_intent .
        "\n";
    echo "ERROR - " .
        current_line() .
        " info at http://docs.casperjs.org/en/latest/modules/tester.html" .
        "\n";
    echo "ERROR - " .
        current_line() .
        " support CSS selector or tx('selector') for XPath algo by TagUI" .
        "\n";
}

function frame_intent($raw_intent)
{
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    $param1 = trim(substr($params, 0, strpos($params, "|")));
    $param2 = trim(substr($params, 1 + strpos($params, "|")));
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " name missing for " .
            $raw_intent .
            "\n";
    } elseif (strpos($params, "|") !== false) {
        $GLOBALS['code_block_tracker'] .= "|" . 'dframe';
        return "casper.then(function() {" .
            "techo('" .
            $raw_intent .
            "');});\n" .
            "casper.withFrame('" .
            $param1 .
            "', function() {casper.withFrame('" .
            $param2 .
            "', function() {\n";
    } else {
        $GLOBALS['code_block_tracker'] .= "|" . 'frame';
        return "casper.then(function() {" .
            "techo('" .
            $raw_intent .
            "');});\n" .
            "casper.withFrame('" .
            $params .
            "', function() {\n";
    }
}

function popup_intent($raw_intent)
{
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " keyword missing for " .
            $raw_intent .
            "\n";
    } else {
        $GLOBALS['code_block_tracker'] .= "|" . 'popup';
        return "casper.then(function() {" .
            "techo('" .
            $raw_intent .
            "');" .
            "});\n" .
            "casper.waitForPopup(/" .
            preg_quote($params) .
            "/, function then() {},\n" .
            "function timeout() {this.echo('ERROR - cannot find popup " .
            $params .
            "').exit();});\n" .
            "casper.withPopup(/" .
            preg_quote($params) .
            "/, function() {\n";
    }
}

function api_intent($raw_intent)
{
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " API URL missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            "{techo('" .
            $raw_intent .
            "');\napi_result = ''; api_result = call_api('" .
            $params .
            "');\n" .
            "try {api_json = JSON.parse(api_result);} catch(e) {api_json = JSON.parse('null');}}" .
            end_fi() .
            "});" .
            "\n\n";
    }
}

function run_intent($raw_intent)
{
    $raw_intent = str_replace('\\', '\\\\', $raw_intent); // to call paths correctly for Windows
    if (strtolower($raw_intent) == "run begin") {
        $GLOBALS['inside_run_block'] = 1;
        return "";
    } elseif (strtolower($raw_intent) == "run finish") {
        $GLOBALS['inside_run_block'] = 0;
        return "";
    }
    if ($GLOBALS['inside_run_block'] == 1) {
        $raw_intent = "run " . $raw_intent;
    }
    $safe_intent = str_replace("'", "\'", $raw_intent); // avoid breaking echo when single quote is used
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " command to run missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            "techo('" .
            $safe_intent .
            "');});\ncasper.then(function() {" .
            "casper.waitForExec('" .
            $params .
            "', null, function(response) {run_result = '';\n" .
            "run_result = (response.data.stdout.trim() || response.data.stderr.trim()); " .
            "run_result = run_result.replace(/\\r\\n/g,'\\n');\nrun_json = response.data;}, function() {" .
            "this.echo('ERROR - command to run exceeded '+(casper.options.waitTimeout/1000).toFixed(1)+'s timeout').exit();}," .
            "casper.options.waitTimeout);});\n\n";
    }
}

function dom_intent($raw_intent)
{
    $twb = $GLOBALS['tagui_web_browser'];
    if (strtolower($raw_intent) == "dom begin") {
        $GLOBALS['inside_dom_block'] = 1;
        $GLOBALS['integration_block_body'] = "dom ";
        return "";
    }
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " statement missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            "dom_result = ''; dom_result = " .
            $twb .
            ".evaluate(function(dom_json) {" .
            $params .
            "}, dom_json);" .
            end_fi() .
            "});" .
            "\n\n";
    }
}

function js_intent($raw_intent)
{
    if (strtolower($raw_intent) == "js begin") {
        $GLOBALS['inside_js_block'] = 1;
        $GLOBALS['integration_block_body'] = "js ";
        return "";
    }
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " statement missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() { // start of JS code\n" .
            $params .
            "\n}); // end of JS code" .
            "\n\n";
    }
}

function r_intent($raw_intent)
{
    if (strtolower($raw_intent) == "r begin") {
        $GLOBALS['inside_r_block'] = 1;
        $GLOBALS['integration_block_body'] = "r ";
        return "";
    }
    $raw_intent = str_replace('\\', '\\\\', $raw_intent); // to send \ correctly over to integration
    $raw_intent = str_replace('[END_OF_LINE]', '\\n', $raw_intent); // replace after above to prevent from escape
    $safe_intent = str_replace("'", "\'", $raw_intent); // avoid breaking echo when single quote is used
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " R command(s) missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" . call_r($safe_intent);
    }
}

function py_intent($raw_intent)
{
    if (strtolower($raw_intent) == "py begin") {
        $GLOBALS['inside_py_block'] = 1;
        $GLOBALS['integration_block_body'] = "py ";
        return "";
    }
    $raw_intent = str_replace('\\', '\\\\', $raw_intent); // to send \ correctly over to integration
    $raw_intent = str_replace('[END_OF_LINE]', '\\n', $raw_intent); // replace after above to prevent from escape
    $safe_intent = str_replace("'", "\'", $raw_intent); // avoid breaking echo when single quote is used
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " Python command(s) missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" . call_py($safe_intent);
    }
}

function vision_intent($raw_intent)
{
    if (strtolower($raw_intent) == "vision begin") {
        $GLOBALS['inside_vision_block'] = 1;
        $GLOBALS['integration_block_body'] = "vision ";
        return "";
    }
    $raw_intent = str_replace('\\', '\\\\', $raw_intent); // to send \ correctly over to integration
    $raw_intent = str_replace('[END_OF_LINE]', '\\n', $raw_intent); // replace after above to prevent from escape
    $safe_intent = str_replace("'", "\'", $raw_intent); // avoid breaking echo when single quote is used
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " Sikuli command(s) missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            call_sikuli($safe_intent, 'for vision step');
    }
} // use sikuli visual automation explicitly

function timeout_intent($raw_intent)
{
    $params = trim(
        substr($raw_intent . " ", 1 + strpos($raw_intent . " ", " "))
    );
    if ($params == "") {
        echo "ERROR - " .
            current_line() .
            " time in seconds missing for " .
            $raw_intent .
            "\n";
    } else {
        return "casper.then(function() {" .
            "casper.options.waitTimeout = " .
            floatval($params) * 1000 .
            "; sikuli_timeout(" .
            floatval($params) .
            ");" .
            end_fi() .
            "});" .
            "\n\n";
    }
}

function code_intent($raw_intent)
{
    $params = parse_condition($raw_intent);
    if (substr($raw_intent, 0, 2) == "//") {
        return $params . "\n";
    } // return comments directly without casper.then wrappers
    if (substr($raw_intent, 0, 1) == "{" or substr($raw_intent, 0, 1) == "}") {
        return $params . "\n";
    } // no wrappers for {}
    if (
        substr($params, 0, 3) == "if " or
        substr($params, 0, 8) == "else if " or
        substr($params, 0, 4) == "for " or
        substr($params, 0, 6) == "while " or
        trim($raw_intent) == "else"
    ) {
        return "casper.then(function() {" . $params . "\n";
    } elseif ($GLOBALS['inside_while_loop'] == 1) {
        return $params . "\n";
    } else {
        return "casper.then(function() { // start of JS code\n" .
            $params .
            "\n}); // end of JS code" .
            "\n\n";
    }
}

function parse_condition($logic)
{
    // natural language handling for conditions
    $raw_logic = $logic; // store an original copy for use when showing error message
    if (substr($logic, 0, 2) == "//") {
        return $logic;
    } // skip processing for comment

    // section 1 - replace braces block {} with casperjs block to group steps or code
    // take only lines starting with { or } as code blocks for processing, otherwise will break many valid javascript code
    if (substr($logic, 0, 1) == "{") {
        $GLOBALS['inside_code_block']++;
    } // assume nothing on rest of the line except comment
    if (substr($logic, 0, 1) == "}") {
        $GLOBALS['inside_code_block']--;
    } // assume nothing on rest of the line except comment
    $code_block_header = "";
    $code_block_footer = "";
    $last_delimiter_pos = strrpos($GLOBALS['code_block_tracker'], "|");
    $code_block_intent = substr(
        $GLOBALS['code_block_tracker'],
        $last_delimiter_pos + 1
    );

    if (
        $GLOBALS['inside_code_block'] >
            substr_count($GLOBALS['code_block_tracker'], "|") and
        substr($logic, 0, 1) == "{"
    ) {
        $GLOBALS['code_block_tracker'] .= "|" . 'normal_bracket';
        return $logic . "\n";
    }
    // handle normal JavaScript brackets
    elseif (
        substr($logic, 0, 1) == "}" and
        $code_block_intent == "normal_bracket"
    ) {
        $GLOBALS['code_block_tracker'] = substr(
            $GLOBALS['code_block_tracker'],
            0,
            $last_delimiter_pos
        );
        return $logic . "\n";
    }

    if (
        $code_block_intent == "if" or
        $code_block_intent == "else if" or
        $code_block_intent == "else" or
        $code_block_intent == "popup" or
        $code_block_intent == "frame"
    ) {
        if (substr($logic, 0, 1) == "}") {
            $GLOBALS['code_block_tracker'] = substr(
                $GLOBALS['code_block_tracker'],
                0,
                $last_delimiter_pos
            );
        }
    } elseif ($code_block_intent == "for" and substr($logic, 0, 1) == "{") {
        $last_delimiter_pos = strrpos($GLOBALS['for_loop_tracker'], "|");
        $for_loop_variable_name = substr(
            $GLOBALS['for_loop_tracker'],
            $last_delimiter_pos + 1
        );
        $code_block_header =
            "{casper.then(function() {for_loop_signal = '[CONTINUE_SIGNAL][" .
            $for_loop_variable_name .
            "]';});\n" .
            "(function (" .
            $for_loop_variable_name .
            ") { // start of IIFE pattern\n";
    } elseif ($code_block_intent == "for" and substr($logic, 0, 1) == "}") {
        $last_delimiter_pos = strrpos($GLOBALS['for_loop_tracker'], "|");
        $for_loop_variable_name = substr(
            $GLOBALS['for_loop_tracker'],
            $last_delimiter_pos + 1
        );
        $code_block_footer =
            "})(" .
            $for_loop_variable_name .
            "); // end of IIFE pattern, with dummy marker for break step\n" .
            "casper.then(function() {for_loop_signal = '[BREAK_SIGNAL][" .
            $for_loop_variable_name .
            "]';});}";
        $last_delimiter_pos = strrpos($GLOBALS['code_block_tracker'], "|");
        $GLOBALS['code_block_tracker'] = substr(
            $GLOBALS['code_block_tracker'],
            0,
            $last_delimiter_pos
        );
        $last_delimiter_pos = strrpos($GLOBALS['for_loop_tracker'], "|");
        $GLOBALS['for_loop_tracker'] = substr(
            $GLOBALS['for_loop_tracker'],
            0,
            $last_delimiter_pos
        );
    } elseif ($code_block_intent == "dframe") {
        if (substr($logic, 0, 1) == "}") {
            $code_block_footer = "});";
            $GLOBALS['code_block_tracker'] = substr(
                $GLOBALS['code_block_tracker'],
                0,
                $last_delimiter_pos
            );
        }
    } elseif ($code_block_intent == "while") {
        if (substr($logic, 0, 1) == "}") {
            $GLOBALS['inside_while_loop'] = 0;
            $GLOBALS['code_block_tracker'] = substr(
                $GLOBALS['code_block_tracker'],
                0,
                $last_delimiter_pos
            );
        }
    }

    if (substr($logic, 0, 1) == "{") {
        $logic =
            $code_block_header .
            "{ // start of code block\n" .
            substr($logic, 1) .
            "\n";
    } elseif (substr($logic, 0, 1) == "}") {
        $logic =
            "} // end of code block\n" .
            substr($logic, 1) .
            "\n" .
            $code_block_footer .
            "});\n";
    }
    $logic = str_replace("\n\n", "\n", $logic); // clean up empty lines from { and } processing

    // section 2 - natural language handling for conditions and loops
    if (
        substr($logic, 0, 3) == "if " or
        substr($logic, 0, 8) == "else if " or
        substr($logic, 0, 4) == "for " or
        substr($logic, 0, 6) == "while "
    ) {
        $logic = str_replace(" more than or equals to ", " >= ", $logic);
        $logic = str_replace(" greater than or equals to ", " >= ", $logic);
        $logic = str_replace(" higher than or equals to ", " >= ", $logic);
        $logic = str_replace(" less than or equals to ", " <= ", $logic);
        $logic = str_replace(" lesser than or equals to ", " <= ", $logic);
        $logic = str_replace(" lower than or equals to ", " <= ", $logic);
        $logic = str_replace(" more than or equal to ", " >= ", $logic);
        $logic = str_replace(" greater than or equal to ", " >= ", $logic);
        $logic = str_replace(" higher than or equal to ", " >= ", $logic);
        $logic = str_replace(" less than or equal to ", " <= ", $logic);
        $logic = str_replace(" lesser than or equal to ", " <= ", $logic);
        $logic = str_replace(" lower than or equal to ", " <= ", $logic);

        $logic = str_replace(" more than ", " > ", $logic);
        $logic = str_replace(" greater than ", " > ", $logic);
        $logic = str_replace(" higher than ", " > ", $logic);
        $logic = str_replace(" less than ", " < ", $logic);
        $logic = str_replace(" lesser than ", " < ", $logic);
        $logic = str_replace(" lower than ", " < ", $logic);
        $logic = str_replace(" not equals to ", " != ", $logic);
        $logic = str_replace(" equals to ", " == ", $logic);
        $logic = str_replace(" not equal to ", " != ", $logic);
        $logic = str_replace(" equal to ", " == ", $logic);

        // special handling to manage not contains, not contain, contains, contain conditions
        $contain_list = array(
            " not contains ",
            " not contain ",
            " contains ",
            " contain "
        );
        foreach ($contain_list as $contain_type) {
            // outer loop, iterate through 4 types of contain conditions
            for (
                $condition_counter = 1;
                $condition_counter <= 5;
                $condition_counter++
            ) {
                // inner loop, avoid while due to infinite loops
                if (strpos($logic, $contain_type) == !false) {
                    $pos_keyword = strpos($logic, $contain_type);
                    $pos_single_quote = strpos(
                        $logic,
                        "'",
                        $pos_keyword + strlen($contain_type)
                    ); // check type of quote used
                    if ($pos_single_quote == false) {
                        $pos_single_quote = 1024;
                    } // set to large number, for comparison later
                    $pos_double_quote = strpos(
                        $logic,
                        "\"",
                        $pos_keyword + strlen($contain_type)
                    ); // check type of quote used
                    if ($pos_double_quote == false) {
                        $pos_double_quote = 1024;
                    } // set to large number, for comparison later
                    if ($pos_double_quote < $pos_single_quote) {
                        $pos_quote_start = $pos_double_quote;
                        $quote_type = "\"";
                    } elseif ($pos_single_quote < $pos_double_quote) {
                        $pos_quote_start = $pos_single_quote;
                        $quote_type = "'";
                    } else {
                        echo "ERROR - " .
                            current_line() .
                            " no quoted text - " .
                            $raw_logic .
                            "\n";
                        $quote_type = "missing";
                    }
                    if ($quote_type != "missing") {
                        $pos_quote_end = strpos(
                            $logic,
                            $quote_type,
                            $pos_quote_start + 1
                        );
                        $pos_variable_start = strrpos(
                            $logic,
                            " ",
                            $pos_keyword - strlen($logic) - 2
                        );
                        $contain_operator = "<0";
                        if (
                            $contain_type == " contains " or
                            $contain_type == " contain "
                        ) {
                            $contain_operator = ">-1";
                        }
                        $logic =
                            substr($logic, 0, $pos_variable_start + 1) .
                            "(" .
                            trim(
                                substr(
                                    $logic,
                                    $pos_variable_start,
                                    $pos_keyword - $pos_variable_start
                                )
                            ) .
                            ".indexOf(" .
                            $quote_type .
                            substr(
                                $logic,
                                $pos_quote_start + 1,
                                $pos_quote_end - $pos_quote_start - 1
                            ) .
                            $quote_type .
                            ")" .
                            $contain_operator .
                            ")" .
                            substr($logic, $pos_quote_end + 1);
                    }
                } else {
                    break;
                }
            }
        }

        // $logic = str_replace(" not "," ! ",$logic); // leaving not out until meaningful to implement
        $logic = str_replace(" and ", ") && (", $logic);
        $logic = str_replace(" or ", ") || (", $logic);

        // special handling to manage for loop in natural language
        if (substr($logic, 0, 4) == "for " and strpos($logic, ";") == false) {
            // no ; means in natural language
            if (strpos($raw_logic, "count(") !== false) {
                echo "ERROR - " .
                    current_line() .
                    " assign count() to variable before using - " .
                    $raw_logic .
                    "\n";
            }
            $logic = str_replace("(", "", $logic);
            $logic = str_replace(")", "", $logic); // remove brackets if present
            $logic = str_replace("   ", " ", $logic);
            $logic = str_replace("  ", " ", $logic); // remove typo extra spaces
            $token = explode(" ", $logic); // split into tokens for loop in natural language, eg - for cupcake from 1 to 4
            if (strpos($raw_logic, "{") !== false) {
                // show error to put { to  next line for parsing as { step
                echo "ERROR - " .
                    current_line() .
                    " put { to next line - " .
                    $raw_logic .
                    "\n";
            } elseif (count($token) != 6) {
                echo "ERROR - " .
                    current_line() .
                    " invalid for loop - " .
                    $raw_logic .
                    "\n";
            } else {
                $logic =
                    $token[0] .
                    " (" .
                    $token[1] .
                    "=" .
                    $token[3] .
                    "; " .
                    $token[1] .
                    "<=" .
                    $token[5] .
                    "; " .
                    $token[1] .
                    "++)";
            }
        } elseif (
            substr($logic, 0, 4) == "for " and
            strpos($raw_logic, "{") !== false
        ) {
            echo "ERROR - " .
                current_line() .
                " put { to next line - " .
                $raw_logic .
                "\n";
        }

        // add to tracker the for loop variable name, to implement IIFE pattern if step/code blocks are used
        if (substr($logic, 0, 4) == "for ") {
            // get the variable name used in the for loop and append into tracker
            $GLOBALS['code_block_tracker'] .= "|" . 'for'; // append for loop marker to track upcoming code block
            $GLOBALS['for_loop_tracker'] .=
                "|" .
                trim(
                    substr(
                        $logic,
                        strpos($logic, "(") + 1,
                        strpos($logic, "=") - strpos($logic, "(") - 1
                    )
                );
        }

        // add opening and closing brackets twice to handle no brackets, and, or cases
        if (substr($logic, 0, 3) == "if ") {
            $GLOBALS['code_block_tracker'] .= "|" . 'if';
            $logic = "if ((" . trim(substr($logic, 3)) . "))";
            if (strpos($raw_logic, "{") !== false) {
                echo "ERROR - " .
                    current_line() .
                    " put { to next line - " .
                    $raw_logic .
                    "\n";
            }
        }
        if (substr($logic, 0, 8) == "else if ") {
            $GLOBALS['code_block_tracker'] .= "|" . 'else if';
            $logic = "else if ((" . trim(substr($logic, 8)) . "))";
            if (strpos($raw_logic, "{") !== false) {
                echo "ERROR - " .
                    current_line() .
                    " put { to next line - " .
                    $raw_logic .
                    "\n";
            }
        }
        if (substr($logic, 0, 6) == "while ") {
            $GLOBALS['code_block_tracker'] .= "|" . 'while';
            $logic = "while ((" . trim(substr($logic, 6)) . "))";
            if (strpos($raw_logic, "{") !== false) {
                echo "ERROR - " .
                    current_line() .
                    " put { to next line - " .
                    $raw_logic .
                    "\n";
            }
        }
    }

    // special part for else because not in section 2 condition block
    if (trim($logic) == "else") {
        $GLOBALS['code_block_tracker'] .= "|" . 'else';
        $logic = "else";
        if (strpos($raw_logic, "{") !== false) {
            echo "ERROR - " .
                current_line() .
                " put { to next line - " .
                $raw_logic .
                "\n";
        }
    }

    // section 3 - track if next statement is going to be or still inside while loop,
    // then avoid async wait (casper.then/waitFor/timeout will hang casperjs/phantomjs??)
    if (substr($logic, 0, 6) == "while ") {
        $GLOBALS['inside_while_loop'] = 1;
    }

    // section 4 - to handle break and continue steps in for loops
    if ($logic == "break" or $logic == "break;") {
        $teleport_marker = str_replace(
            "|",
            "",
            substr(
                $GLOBALS['for_loop_tracker'],
                strrpos($GLOBALS['for_loop_tracker'], "|")
            )
        );
        $logic =
            "casper.bypass(teleport_distance('[BREAK_SIGNAL][" .
            $teleport_marker .
            "]')); return;";
    }
    if ($logic == "continue" or $logic == "continue;") {
        $teleport_marker = str_replace(
            "|",
            "",
            substr(
                $GLOBALS['for_loop_tracker'],
                strrpos($GLOBALS['for_loop_tracker'], "|")
            )
        );
        $logic =
            "casper.bypass(teleport_distance('[CONTINUE_SIGNAL][" .
            $teleport_marker .
            "]')); return;";
    }

    // return code after all the parsing and special handling
    return $logic;
}

?>

```
